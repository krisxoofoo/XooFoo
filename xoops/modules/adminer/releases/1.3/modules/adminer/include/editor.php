<?php
/** Adminer Editor - Compact database editor
* @link http://www.adminer.org/
* @author Jakub Vrana, http://www.vrana.cz/
* @copyright 2009 Jakub Vrana
* @license http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0
* @license http://www.gnu.org/licenses/gpl-2.0.html GNU General Public License, version 2 (one or other)
*/error_reporting(6135);$Mc=(!ereg('^(unsafe_raw)?$',ini_get("filter.default"))||ini_get("filter.default_flags"));if($Mc){foreach(array('_GET','_POST','_COOKIE','_SERVER')as$a){$vc=filter_input_array(constant("INPUT$a"),FILTER_UNSAFE_RAW);if($vc){$$a=$vc;}}}if(isset($_GET["file"])){header("Expires: ".gmdate("D, d M Y H:i:s",time()+365*24*60*60)." GMT");if($_GET["file"]=="favicon.ico"){header("Content-Type: image/x-icon");echo
base64_decode("AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AAAA/wBhTgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAERERAAAAAAETMzEQAAAAATERExAAAAABMRETEAAAAAExERMQAAAAATERExAAAAABMRETEAAAAAEzMzMREREQATERExEhEhABEzMxEhEREAAREREhERIRAAAAARIRESEAAAAAESEiEQAAAAABEREQAAAAAAAAAAD//9UAwP/VAIB/AACAf/AAgH+kAIB/gACAfwAAgH8AAIABAACAAf8AgAH/AMAA/wD+AP8A/wAIAf+B1QD//9UA");}elseif($_GET["file"]=="default.css"){header("Content-Type: text/css; charset=utf-8");echo'body{color:#000;background:#fff;font:90%/1.25 Verdana,Arial,Helvetica,sans-serif;margin:0;}a{color:blue;}a:visited{color:navy;}a:hover{color:red;}h1{font-size:150%;margin:0;padding:.8em 1em;border-bottom:1px solid #999;font-weight:normal;color:#777;background:#eee;}h2{font-size:150%;margin:0 0 20px -18px;padding:.8em 1em;border-bottom:1px solid #000;color:#000;font-weight:normal;background:#ddf;}h3{font-weight:normal;font-size:130%;margin:1em 0 0;}form{margin:0;}table{margin:1em 20px 0 0;border:0;border-top:1px solid #999;border-left:1px solid #999;font-size:90%;}td,th{border:0;border-right:1px solid #999;border-bottom:1px solid #999;padding:.2em .3em;}th{background:#eee;text-align:left;}thead th{text-align:center;}thead td,thead th{background:#ddf;}fieldset{display:inline;vertical-align:top;padding:.5em .8em;margin:.8em .5em 0 0;border:1px solid #999;}p{margin:.8em 20px 0 0;}img{vertical-align:middle;border:0;}td img{max-width:200px;max-height:200px;}code{background:#eee;}tr:hover td,tr:hover th{background:#ddf;}pre{margin:1em 0 0;}.version{color:#777;font-size:67%;}.js .hidden{display:none;}.nowrap td,.nowrap th,td.nowrap{white-space:pre;}.wrap td{white-space:normal;}.error{color:red;background:#fee;}.error b{background:#fff;font-weight:normal;}.message{color:green;background:#efe;}.error,.message{padding:.5em .8em;margin:1em 20px 0 0;}.char{color:#007F00;}.date{color:#7F007F;}.enum{color:#007F7F;}.binary{color:red;}.odd td{background:#F5F5F5;}.time{color:silver;font-size:70%;}.function{text-align:right;}.number{text-align:right;}.datetime{text-align:right;}.type{width:15ex;width:auto\\9;}#menu{position:absolute;margin:10px 0 0;padding:0 0 30px 0;top:2em;left:0;width:19em;overflow:auto;overflow-y:hidden;white-space:nowrap;}#menu p{padding:.8em 1em;margin:0;border-bottom:1px solid #ccc;}#content{margin:2em 0 0 21em;padding:10px 20px 20px 0;}#lang{position:absolute;top:0;left:0;line-height:1.8em;padding:.3em 1em;}#breadcrumb{white-space:nowrap;position:absolute;top:0;left:21em;background:#eee;height:2em;line-height:1.8em;padding:0 1em;margin:0 0 0 -18px;}#h1{color:#777;text-decoration:none;font-style:italic;}#version{font-size:67%;color:red;}#schema{margin-left:60px;position:relative;}#schema .table{border:1px solid silver;padding:0 2px;cursor:move;position:absolute;}#schema .references{position:absolute;}.rtl h2{margin:0 -18px 20px 0;}.rtl p,.rtl table,.rtl .error,.rtl .message{margin:1em 0 0 20px;}.rtl #content{margin:2em 21em 0 0;padding:10px 0 20px 20px;}.rtl #breadcrumb{left:auto;right:21em;margin:0 -18px 0 0;}.rtl #lang,.rtl #menu{left:auto;right:0;}@media print{#lang,#menu{display:none;}#content{margin-left:1em;}#breadcrumb{left:1em;}}';}elseif($_GET["file"]=="functions.js"){header("Content-Type: text/javascript; charset=utf-8");?>
document.body.className+=' js';function toggle(id){var el=document.getElementById(id);el.className=(el.className=='hidden'?'':'hidden');return true;}
function cookie(assign,days,params){var date=new Date();date.setDate(date.getDate()+days);document.cookie=assign+'; expires='+date+(params||'');}
function verifyVersion(protocol){cookie('adminer_version=0',1);var script=document.createElement('script');script.src=protocol+'://www.adminer.org/version.php';document.body.appendChild(script);}
function formCheck(el,name){var elems=el.form.elements;for(var i=0;i<elems.length;i++){if(name.test(elems[i].name)){elems[i].checked=el.checked;}}}
function formUncheck(id){document.getElementById(id).checked=false;}
function formChecked(el,name){var checked=0;var elems=el.form.elements;for(var i=0;i<elems.length;i++){if(name.test(elems[i].name)&&elems[i].checked){checked++;}}
return checked;}
function tableClick(event){var el=event.target||event.srcElement;while(!/^tr$/i.test(el.tagName)){if(/^(table|a|input|textarea)$/i.test(el.tagName)){return;}
el=el.parentNode;}
el=el.firstChild.firstChild;el.click&&el.click();el.onclick&&el.onclick();}
function setHtml(id,html){var el=document.getElementById(id);if(el){if(html==undefined){el.parentNode.innerHTML='&nbsp;';}else{el.innerHTML=html;}}}
function selectAddRow(field){field.onchange=function(){};var row=field.parentNode.cloneNode(true);var selects=row.getElementsByTagName('select');for(var i=0;i<selects.length;i++){selects[i].name=selects[i].name.replace(/[a-z]\[\d+/,'$&1');selects[i].selectedIndex=0;}
var inputs=row.getElementsByTagName('input');if(inputs.length){inputs[0].name=inputs[0].name.replace(/[a-z]\[\d+/,'$&1');inputs[0].value='';inputs[0].className='';}
field.parentNode.parentNode.appendChild(row);}
function textareaKeydown(target,event,tab,button){if(tab&&event.keyCode==9&&!event.shiftKey&&!event.altKey&&!event.ctrlKey&&!event.metaKey){if(target.setSelectionRange){var start=target.selectionStart;target.value=target.value.substr(0,start)+'\t'+target.value.substr(target.selectionEnd);target.setSelectionRange(start+1,start+1);return false;}else if(target.createTextRange){document.selection.createRange().text='\t';return false;}}
if(event.ctrlKey&&(event.keyCode==13||event.keyCode==10)&&!event.altKey&&!event.metaKey){if(button){button.click();}else{target.form.submit();}}
return true;}
function selectDblClick(td,event,text){td.ondblclick=function(){};var pos=event.rangeOffset;var value=(td.firstChild.firstChild?td.firstChild.firstChild.data:(td.firstChild.alt?td.firstChild.alt:td.firstChild.data));var input=document.createElement(text?'textarea':'input');input.name=td.id;input.value=(value=='\u00A0'||td.getElementsByTagName('i').length?'':value);input.style.width=Math.max(td.clientWidth-14,20)+'px';if(text){var rows=1;value.replace(/\n/g,function(){rows++;});input.rows=rows;input.onkeydown=function(event){return textareaKeydown(input,event||window.event);};}
if(document.selection){var range=document.selection.createRange();range.moveToPoint(event.x,event.y);var range2=range.duplicate();range2.moveToElementText(td);range2.setEndPoint('EndToEnd',range);pos=range2.text.length;}
td.innerHTML='';td.appendChild(input);input.focus();input.selectionStart=pos;input.selectionEnd=pos;if(document.selection){var range=document.selection.createRange();range.moveStart('character',pos);range.select();}}
function bodyLoad(version){}<?php
}else{header("Content-Type: image/gif");switch($_GET["file"]){case"plus.gif":echo
base64_decode("R0lGODdhEgASAKEAAO7u7gAAAJmZmQAAACwAAAAAEgASAAACIYSPqcvtD00I8cwqKb5v+q8pIAhxlRmhZYi17iPE8kzLBQA7");break;case"cross.gif":echo
base64_decode("R0lGODdhEgASAKEAAO7u7gAAAJmZmQAAACwAAAAAEgASAAACI4SPqcvtDyMKYdZGb355wy6BX3dhlOEx57FK7gtHwkzXNl0AADs=");break;case"up.gif":echo
base64_decode("R0lGODdhEgASAKEAAO7u7gAAAJmZmQAAACwAAAAAEgASAAACIISPqcvtD00IUU4K730T9J5hFTiKEXmaYcW2rgDH8hwXADs=");break;case"down.gif":echo
base64_decode("R0lGODdhEgASAKEAAO7u7gAAAJmZmQAAACwAAAAAEgASAAACIISPqcvtD00I8cwqKb5bV/5cosdMJtmcHca2lQDH8hwXADs=");break;case"arrow.gif":echo
base64_decode("R0lGODlhCAAKAIAAAICAgP///yH5BAEAAAEALAAAAAAIAAoAAAIPBIJplrGLnpQRqtOy3rsAADs=");break;}}exit;}function
connection(){global$g;return$g;}function
idf_unescape($O){$Wb=substr($O,-1);return
str_replace($Wb.$Wb,$Wb,substr($O,1,-1));}function
escape_string($a){return
substr(q($a),1,-1);}function
remove_slashes($qa){if(get_magic_quotes_gpc()){while(list($b,$a)=each($qa)){foreach($a
as$Y=>$n){unset($qa[$b][$Y]);if(is_array($n)){$qa[$b][stripslashes($Y)]=$n;$qa[]=&$qa[$b][stripslashes($Y)];}else{$qa[$b][stripslashes($Y)]=($Mc?$n:stripslashes($n));}}}}}function
bracket_escape($O,$ad=false){static$Fc=array(':'=>':1',']'=>':2','['=>':3');return
strtr($O,($ad?array_flip($Fc):$Fc));}function
h($z){return
htmlspecialchars($z,ENT_QUOTES);}function
nbsp($z){return(trim($z)!=""?h($z):"&nbsp;");}function
nl_br($z){return
str_replace("\n","<br>",$z);}function
checkbox($f,$k,$Va,$Ec="",$Dc=""){static$L=0;$L++;$c="<input type='checkbox'".($f?" name='$f' value='".h($k)."'":"").($Va?" checked":"").($Dc?" onclick=\"$Dc\"":"")." id='checkbox-$L'>";return($Ec!=""?"<label for='checkbox-$L'>$c".h($Ec)."</label>":$c);}function
optionlist($la,$Vc=null,$Qc=false){$c="";foreach($la
as$Y=>$n){if(is_array($n)){$c.='<optgroup label="'.h($Y).'">';}foreach((is_array($n)?$n:array($Y=>$n))as$b=>$a){$c.='<option'.($Qc||is_string($b)?' value="'.h($b).'"':'').(($Qc||is_string($b)?(string)$b:$a)===$Vc?' selected':'').'>'.h($a);}if(is_array($n)){$c.='</optgroup>';}}return$c;}function
html_select($f,$la,$k="",$ya=true){if($ya){return"<select name='".h($f)."'".(is_string($ya)?" onchange=\"$ya\"":"").">".optionlist($la,$k)."</select>";}$c="";foreach($la
as$b=>$a){$c.="<label><input type='radio' name='".h($f)."' value='".h($b)."'".($b==$k?" checked":"").">".h($a)."</label>";}return$c;}function
confirm($Lc=""){return" onclick=\"return confirm('".lang(0).($Lc?" (' + $Lc + ')":"")."');\"";}function
js_escape($z){return
addcslashes($z,"\r\n'\\/");}function
ini_bool($Xc){$a=ini_get($Xc);return(eregi('^(on|true|yes)$',$a)||(int)$a);}function
q($z){global$g;return$g->quote($z);}function
get_vals($m,$J=0){global$g;$c=array();$i=$g->query($m);if(is_object($i)){while($d=$i->fetch_row()){$c[]=$d[$J];}}return$c;}function
get_key_vals($m,$fa=null){global$g;if(!is_object($fa)){$fa=$g;}$c=array();$i=$fa->query($m);while($d=$i->fetch_row()){$c[$d[0]]=$d[1];}return$c;}function
get_rows($m,$fa=null,$w="<p class='error'>"){global$g;if(!is_object($fa)){$fa=$g;}$c=array();$i=$fa->query($m);if(is_object($i)){while($d=$i->fetch_assoc()){$c[]=$d;}}elseif(!$i&&$w&&(headers_sent()||ob_get_level())){echo$w.error()."\n";}return$c;}function
unique_array($d,$F){foreach($F
as$U){if(ereg("PRIMARY|UNIQUE",$U["type"])){$c=array();foreach($U["columns"]as$b){if(!isset($d[$b])){continue
2;}$c[$b]=$d[$b];}return$c;}}$c=array();foreach($d
as$b=>$a){if(!preg_match('~^(COUNT\\((\\*|(DISTINCT )?`(?:[^`]|``)+`)\\)|(AVG|GROUP_CONCAT|MAX|MIN|SUM)\\(`(?:[^`]|``)+`\\))$~',$b)){$c[$b]=$a;}}return$c;}function
where($p){global$za;$c=array();foreach((array)$p["where"]as$b=>$a){$c[]=idf_escape(bracket_escape($b,1)).(ereg('\\.',$a)||$za=="mssql"?" LIKE ".exact_value(addcslashes($a,"%_")):" = ".exact_value($a));}foreach((array)$p["null"]as$b){$c[]=idf_escape($b)." IS NULL";}return
implode(" AND ",$c);}function
where_check($a){parse_str($a,$Pc);remove_slashes(array(&$Pc));return
where($Pc);}function
where_link($o,$J,$k,$Wc="="){return"&where%5B$o%5D%5Bcol%5D=".urlencode($J)."&where%5B$o%5D%5Bop%5D=".urlencode($Wc)."&where%5B$o%5D%5Bval%5D=".urlencode($k);}function
cookie($f,$k){global$Ja;$Ma=array($f,(ereg("\n",$k)?"":$k),time()+2592000,preg_replace('~\\?.*~','',$_SERVER["REQUEST_URI"]),"",$Ja);if(version_compare(PHP_VERSION,'5.2.0')>=0){$Ma[]=true;}return
call_user_func_array('setcookie',$Ma);}function
restart_session(){if(!ini_bool("session.use_cookies")){session_start();}}function&get_session($b){return$_SESSION[$b][DRIVER][SERVER][$_GET["username"]];}function
set_session($b,$a){$_SESSION[$b][DRIVER][SERVER][$_GET["username"]]=$a;}function
auth_url($fb,$C,$D){global$Aa;preg_match('~([^?]*)\\??(.*)~',remove_from_uri(implode("|",array_keys($Aa))."|username|".session_name()),$h);return"$h[1]?".(SID&&!$_COOKIE?SID."&":"").($fb!="server"||$C!=""?urlencode($fb)."=".urlencode($C)."&":"")."username=".urlencode($D).($h[2]?"&$h[2]":"");}function
redirect($Q,$W=null){if(isset($W)){restart_session();$_SESSION["messages"][]=$W;}if(isset($Q)){header("Location: ".($Q!=""?$Q:"."));exit;}}function
query_redirect($m,$Q,$W,$cb=true,$Uc=true,$hc=false){global$g,$w,$j;if($Uc){$hc=!$g->query($m);}$Qb="";if($m){$Qb=$j->messageQuery($m);}if($hc){$w=error().$Qb;return
false;}if($cb){redirect($Q,$W.$Qb);}return
true;}function
queries($m=null){global$g;static$Zb=array();if(!isset($m)){return
implode(";\n",$Zb);}$Zb[]=$m;return$g->query($m);}function
apply_queries($m,$pa,$Zc='table'){foreach($pa
as$l){if(!queries("$m ".$Zc($l))){return
false;}}return
true;}function
queries_redirect($Q,$W,$cb){return
query_redirect(queries(),$Q,$W,$cb,false,!$cb);}function
remove_from_uri($ia=""){return
substr(preg_replace("~(?<=[?&])($ia".(SID?"":"|".session_name()).")=[^&]*&~",'',"$_SERVER[REQUEST_URI]&"),0,-1);}function
pagination($y,$Yc){return" ".($y==$Yc?$y+1:'<a href="'.h(remove_from_uri("page").($y?"&page=$y":"")).'">'.($y+1)."</a>");}function
get_file($b,$pc=false){$G=$_FILES[$b];if(!$G||$G["error"]){return$G["error"];}return
file_get_contents($pc&&ereg('\\.gz$',$G["name"])?"compress.zlib://$G[tmp_name]":($pc&&ereg('\\.bz2$',$G["name"])?"compress.bzip2://$G[tmp_name]":$G["tmp_name"]));}function
upload_error($w){$oc=($w==UPLOAD_ERR_INI_SIZE?ini_get("upload_max_filesize"):null);return($w?lang(1).($oc?" ".lang(2,$oc):""):lang(3));}function
odd($c=' class="odd"'){static$o=0;if(!$c){$o=-1;}return($o++%
2?$c:'');}function
is_utf8($a){return(preg_match('~~u',$a)&&!preg_match('~[\\0-\\x8\\xB\\xC\\xE-\\x1F]~',$a));}function
shorten_utf8($z,$Oc=80,$fd=""){if(!preg_match("(^([\t\r\n -\x{FFFF}]{0,$Oc})($)?)u",$z,$h)){preg_match("(^([\t\r\n -~]{0,$Oc})($)?)",$z,$h);}return
h($h[1]).$fd.(isset($h[2])?"":"<i>...</i>");}function
friendly_url($a){return
preg_replace('~[^a-z0-9_]~i','-',$a);}function
hidden_fields($qa,$ud=array()){while(list($b,$a)=each($qa)){if(is_array($a)){foreach($a
as$Y=>$n){$qa[$b."[$Y]"]=$n;}}elseif(!in_array($b,$ud)){echo'<input type="hidden" name="'.h($b).'" value="'.h($a).'">';}}}function
hidden_fields_get(){echo(SID&&!$_COOKIE?'<input type="hidden" name="'.session_name().'" value="'.h(session_id()).'">':''),(SERVER!==null?'<input type="hidden" name="'.DRIVER.'" value="'.h(SERVER).'">':""),'<input type="hidden" name="username" value="'.h($_GET["username"]).'">';}function
column_foreign_keys($l){global$j;$c=array();foreach($j->foreignKeys($l)as$ka){foreach($ka["source"]as$a){$c[$a][]=$ka;}}return$c;}function
enum_input($Ba,$S,$e,$k){preg_match_all("~'((?:[^']|'')*)'~",$e["length"],$H);$c="";foreach($H[1]as$o=>$a){$a=stripcslashes(str_replace("''","'",$a));$Va=(is_int($k)?$k==$o+1:(is_array($k)?in_array($o+1,$k):$k===$a));$c.=" <label><input type='$Ba'$S value='".($o+1)."'".($Va?' checked':'').'>'.h($a).'</label>';}return$c;}function
input($e,$k,$A){global$Ia,$j,$za;$f=h(bracket_escape($e["field"]));echo"<td class='function'>";$ga=(isset($_GET["select"])?array("orig"=>lang(4)):array())+$j->editFunctions($e);$S=" name='fields[$f]'";if($e["type"]=="enum"){echo
nbsp($ga[""])."<td>".$j->editInput($_GET["edit"],$e,$S,$k);}else{$_a=0;foreach($ga
as$b=>$a){if($b===""||!$a){break;}$_a++;}$ya=($_a?" onchange=\"var f = this.form['function[".js_escape($f)."]']; if ($_a > f.selectedIndex) f.selectedIndex = $_a;\"":"");$S.=$ya;echo(count($ga)>1?html_select("function[$f]",$ga,!isset($A)||in_array($A,$ga)||isset($ga[$A])?$A:""):nbsp(reset($ga))).'<td>';$nc=$j->editInput($_GET["edit"],$e,$S,$k);if($nc!=""){echo$nc;}elseif($e["type"]=="set"){preg_match_all("~'((?:[^']|'')*)'~",$e["length"],$H);foreach($H[1]as$o=>$a){$a=stripcslashes(str_replace("''","'",$a));$Va=(is_int($k)?($k>>$o)&1:in_array($a,explode(",",$k),true));echo" <label><input type='checkbox' name='fields[$f][$o]' value='".(1<<$o)."'".($Va?' checked':'')."$ya>".h($a).'</label>';}}elseif(ereg('blob|bytea|raw|file',$e["type"])&&ini_bool("file_uploads")){echo"<input type='file' name='fields-$f'$ya>";}elseif(ereg('text|lob',$e["type"])){echo"<textarea ".($za!="sqlite"||ereg("\n",$k)?"cols='50' rows='12'":"cols='30' rows='1' style='height: 1.2em;'")."$S onkeydown='return textareaKeydown(this, event);'>".h($k).'</textarea>';}else{$Sb=(!ereg('int',$e["type"])&&preg_match('~^(\\d+)(,(\\d+))?$~',$e["length"],$h)?((ereg("binary",$e["type"])?2:1)*$h[1]+($h[3]?1:0)+($h[2]&&!$e["unsigned"]?1:0)):($Ia[$e["type"]]?$Ia[$e["type"]]+($e["unsigned"]?0:1):0));echo"<input value='".h($k)."'".($Sb?" maxlength='$Sb'":"").(ereg('char|binary',$e["type"])&&$Sb>20?" size='40'":"")."$S>";}}}function
process_input($e){global$j;$O=bracket_escape($e["field"]);$A=$_POST["function"][$O];$k=$_POST["fields"][$O];if($e["type"]=="enum"){if($k==-1){return
false;}if($k==""){return"NULL";}return+$k;}if($e["auto_increment"]&&$k==""){return
null;}if($A=="orig"){return
false;}if($A=="NULL"){return"NULL";}if($e["type"]=="set"){return
array_sum((array)$k);}if(ereg('blob|bytea|raw|file',$e["type"])&&ini_bool("file_uploads")){$G=get_file("fields-$O");if(!is_string($G)){return
false;}return
q($G);}return$j->processInput($e,$k,$A);}function
search_tables(){global$j,$g;$_GET["where"][0]["op"]="LIKE %%";$_GET["where"][0]["val"]=$_POST["query"];$Tb=false;foreach(table_status()as$l=>$I){$f=$j->tableName($I);if(isset($I["Engine"])&&$f!=""&&(!$_POST["tables"]||in_array($l,$_POST["tables"]))){$i=$g->query("SELECT".limit("1 FROM ".table($l)," WHERE ".implode(" AND ",$j->selectSearchProcess(fields($l),array())),1));if($i->fetch_row()){if(!$Tb){echo"<ul>\n";$Tb=true;}echo"<li><a href='".h(ME."select=".urlencode($l)."&where[0][op]=".urlencode($_GET["where"][0]["op"])."&where[0][val]=".urlencode($_GET["where"][0]["val"]))."'>".h($f)."</a>\n";}}}echo($Tb?"</ul>":"<p class='message'>".lang(5))."\n";}function
dump_csv($d){foreach($d
as$b=>$a){if(preg_match("~[\"\n,;\t]~",$a)||$a===""){$d[$b]='"'.str_replace('"','""',$a).'"';}}echo
implode(($_POST["format"]=="csv"?",":($_POST["format"]=="tsv"?"\t":";")),$d)."\n";}function
apply_sql_function($A,$J){return($A?($A=="unixepoch"?"DATETIME($J, '$A')":($A=="count distinct"?"COUNT(DISTINCT ":strtoupper("$A("))."$J)"):$J);}function
password_file(){$qb=ini_get("upload_tmp_dir");if(!$qb){if(function_exists('sys_get_temp_dir')){$qb=sys_get_temp_dir();}else{$ta=@tempnam("","");if(!$ta){return
false;}$qb=dirname($ta);unlink($ta);}}$ta="$qb/adminer.key";$c=@file_get_contents($ta);if($c){return$c;}$Rb=@fopen($ta,"w");if($Rb){$c=md5(uniqid(mt_rand(),true));fwrite($Rb,$c);fclose($Rb);}return$c;}function
is_mail($La){$uc='[-a-z0-9!#$%&\'*+/=?^_`{|}~]';$Wa='[a-z0-9]([-a-z0-9]{0,61}[a-z0-9])';$V="$uc+(\\.$uc+)*@($Wa?\\.)+$Wa";return
preg_match("(^$V(,\\s*$V)*\$)i",$La);}function
is_url($z){$Wa='[a-z0-9]([-a-z0-9]{0,61}[a-z0-9])';return(preg_match("~^(https?)://($Wa?\\.)+$Wa(:\\d+)?(/.*)?(\\?.*)?(#.*)?\$~i",$z,$h)?strtolower($h[1]):"");}function
print_fieldset($L,$qd,$rd=false){echo"<fieldset><legend><a href='#fieldset-$L' onclick=\"return !toggle('fieldset-$L');\">$qd</a></legend><div id='fieldset-$L'".($rd?"":" class='hidden'").">\n";}function
bold($z,$wd){return($wd?"<b>$z</b>":$z);}if(!isset($_SERVER["REQUEST_URI"])){$_SERVER["REQUEST_URI"]=$_SERVER["ORIG_PATH_INFO"].($_SERVER["QUERY_STRING"]!=""?"?$_SERVER[QUERY_STRING]":"");}$Ja=$_SERVER["HTTPS"]&&strcasecmp($_SERVER["HTTPS"],"off");@ini_set("session.use_trans_sid",false);if(!defined("SID")){session_name("adminer_sid");$Ma=array(0,preg_replace('~\\?.*~','',$_SERVER["REQUEST_URI"]),"",$Ja);if(version_compare(PHP_VERSION,'5.2.0')>=0){$Ma[]=true;}call_user_func_array('session_set_cookie_params',$Ma);session_start();}remove_slashes(array(&$_GET,&$_POST,&$_COOKIE));if(function_exists("set_magic_quotes_runtime")){set_magic_quotes_runtime(false);}@set_time_limit(0);@ini_set("zend.ze1_compatibility_mode",false);@ini_set("precision",20);$Ha=array('en'=>'English','cs'=>'Čeština','sk'=>'Slovenčina','nl'=>'Nederlands','es'=>'Español','de'=>'Deutsch','fr'=>'Français','it'=>'Italiano','et'=>'Eesti','hu'=>'Magyar','ca'=>'Català','ru'=>'Русский язык','zh'=>'简体中文','zh-tw'=>'繁體中文','ja'=>'日本語','ta'=>'த‌மிழ்','ar'=>'العربية',);function
lang($O,$pb=null){global$ba,$E;$Ga=$E[$O];if(is_array($Ga)&&$Ga){$_d=($pb==1||(!$pb&&$ba=='fr')?0:((!$pb||$pb>=5)&&ereg('cs|sk|ru',$ba)?2:1));$Ga=$Ga[$_d];}$sc=func_get_args();array_shift($sc);return
vsprintf((isset($Ga)?$Ga:$O),$sc);}function
switch_lang(){global$ba,$Ha;echo"<form action=''>\n<div id='lang'>";hidden_fields($_GET,array('lang'));echo
lang(6).": ".html_select("lang",$Ha,$ba,"this.form.submit();")," <input type='submit' value='".lang(7)."' class='hidden'>\n","</div>\n</form>\n";}if(isset($_GET["lang"])){$_COOKIE["adminer_lang"]=$_GET["lang"];$_SESSION["lang"]=$_GET["lang"];}$ba="en";if(isset($Ha[$_COOKIE["adminer_lang"]])){cookie("adminer_lang",$_COOKIE["adminer_lang"]);$ba=$_COOKIE["adminer_lang"];}elseif(isset($Ha[$_SESSION["lang"]])){$ba=$_SESSION["lang"];}else{$nb=array();preg_match_all('~([-a-z]+)(;q=([0-9.]+))?~',str_replace("_","-",strtolower($_SERVER["HTTP_ACCEPT_LANGUAGE"])),$H,PREG_SET_ORDER);foreach($H
as$h){$nb[$h[1]]=(isset($h[3])?$h[3]:1);}arsort($nb);foreach($nb
as$b=>$kb){if(isset($Ha[$b])){$ba=$b;break;}$b=preg_replace('~-.*~','',$b);if(!isset($nb[$b])&&isset($Ha[$b])){$ba=$b;break;}}}switch($ba){case"en":$E=array('Are you sure?','Unable to upload a file.','Maximum allowed file size is %sB.','File does not exist.','original','No tables.','Language','Use','Numbers','Date and time','Strings','Binary','Lists','Editor','Username','Password','Login','Permanent login','New item','Last page',array('%d byte','%d bytes'),'$1-$3-$5','Search','anywhere','Sort','Limit','Action','Select','E-mail','From','Subject','Insert','Attachments','Send',array('%d e-mail has been sent.','%d e-mails have been sent.'),'now','empty','[yyyy]-mm-dd','Logout','ltr','Server','Invalid CSRF token. Send the form again.','Logout successful.','Session support must be enabled.','Session expired, please login again.','Invalid credentials.','No extension','None of the supported PHP extensions (%s) are available.','Too big POST data. Reduce the data or increase the %s configuration directive.','Item has been deleted.','Item has been updated.','Item%s has been inserted.','Edit','Save','Save and continue edit','Save and insert next','Delete',array('%d item has been affected.','%d items have been affected.'),'Double click on a value to modify it.',array('%d row has been imported.','%d rows have been imported.'),'Unable to select the table','No rows.','edit','Relations','Increase Text length to modify this value.','Use edit link to modify this value.','Page','last',array('%d row','%d rows'),'whole result','Clone','Export','CSV Import','Import','Search data in tables','Table','Rows',',',array('%d query executed OK.','%d queries executed OK.'));break;case"cs":$E=array('Opravdu?','Nepodařilo se nahrát soubor.','Maximální povolená velikost souboru je %sB.','Soubor neexistuje.','původní','Žádné tabulky.','Jazyk','Vybrat','Čísla','Datum a čas','Řetězce','Binární','Seznamy','Editor','Uživatel','Heslo','Přihlásit se','Trvalé přihlášení','Nová položka','Poslední stránka',array('%d bajt','%d bajty','%d bajtů'),'$6.$4.$1','Vyhledat','kdekoliv','Seřadit','Limit','Akce','Vypsat','E-mail','Odesílatel','Předmět','Vložit','Přílohy','Odeslat',array('Byl odeslán %d e-mail.','Byly odeslány %d e-maily.','Bylo odesláno %d e-mailů.'),'teď','prázdné','d.m.[rrrr]','Odhlásit','ltr','Server','Neplatný token CSRF. Odešlete formulář znovu.','Odhlášení proběhlo v pořádku.','Session proměnné musí být povolené.','Session vypršela, přihlašte se prosím znovu.','Neplatné přihlašovací údaje.','Žádná extenze','Není dostupná žádná z podporovaných PHP extenzí (%s).','Příliš velká POST data. Zmenšete data nebo zvyšte hodnotu konfigurační direktivy %s.','Položka byla smazána.','Položka byla aktualizována.','Položka%s byla vložena.','Upravit','Uložit','Uložit a pokračovat v editaci','Uložit a vložit další','Smazat',array('Byl ovlivněn %d záznam.','Byly ovlivněny %d záznamy.','Bylo ovlivněno %d záznamů.'),'Dvojklikněte na políčko, které chcete změnit.',array('Byl importován %d záznam.','Byly importovány %d záznamy.','Bylo importováno %d záznamů.'),'Nepodařilo se vypsat tabulku','Žádné řádky.','upravit','Vztahy','Ke změně této hodnoty zvyšte Délku textů.','Ke změně této hodnoty použijte odkaz upravit.','Stránka','poslední',array('%d řádek','%d řádky','%d řádků'),'celý výsledek','Klonovat','Export','Import CSV','Import','Vyhledat data v tabulkách','Tabulka','Řádků',' ','Pozměnit typ');break;case"sk":$E=array('Naozaj?','Súbor sa nepodarilo nahrať.','Maximálna povolená veľkosť súboru je %sB.','Súbor neexistuje.','originál','Žiadne tabuľky.','Jazyk','Vybrať','Čísla','Dátum a čas','Reťazce','Binárne','Zoznamy','Editor','Používateľ','Heslo','Prihlásiť sa','Trvalé prihlásenie','Nová položka','Posledná stránka',array('%d bajt','%d bajty','%d bajtov'),'$6.$4.$1','Vyhľadať','kdekoľvek','Zotriediť','Limit','Akcia','Vypísať','E-mail','Odosielateľ','Predmet','Vložiť','Prílohy','Odoslať',array('Bol odoslaný %d e-mail.','Boli odoslané %d e-maily.','Bolo odoslaných %d e-mailov.'),'teraz','prázdne','d.m.[rrrr]','Odhlásiť','ltr','Server','Neplatný token CSRF. Odošlite formulár znova.','Odhlásenie prebehlo v poriadku.','Session premenné musia byť povolené.','Session vypršala, prihláste sa prosím znova.','Neplatné prihlasovacie údaje.','Žiadne rozšírenie','Nie je dostupné žiadne z podporovaných rozšírení (%s).','Príliš veľké POST dáta. Zmenšite dáta alebo zvýšte hodnotu konfiguračej direktívy %s.','Položka bola vymazaná.','Položka bola aktualizovaná.','Položka%s bola vložená.','Upraviť','Uložiť','Uložiť a pokračovať v úpravách','Uložiť a vložiť ďalší','Zmazať','%d položiek bolo ovplyvnených.','Dvojkliknite na políčko, ktoré chcete zmeniť.',array('Bol importovaný %d záznam.','Boli importované %d záznamy.','Bolo importovaných %d záznamov.'),'Tabuľku sa nepodarilo vypísať','Žiadne riadky.','upraviť','Vzťahy','Pre zmenu tejto hodnoty zvýšte Dĺžku textov.','Pre zmenu tejto hodnoty použite odkaz upraviť.','Stránka','posledný',array('%d riadok','%d riadky','%d riadkov'),'celý výsledok','Klonovať','Export','Import CSV','Import','Vyhľadať dáta v tabuľkách','Tabuľka','Riadky',' ','Prosím vyberte jednu z koncoviek %s.');break;case"nl":$E=array('Weet u het zeker?','Onmogelijk bestand te uploaden.','Maximum toegelaten bestandsgrootte is %sB.','Bestand niet gevonden.','origineel','Geen tabellen.','Taal','Gebruik','Getallen','Datum en tijd','Tekst','Binaire gegevens','Lijsten','Editor','Gebruikersnaam','Wachtwoord','Inloggen','Blijf aangemeld','Nieuw item','Laatste pagina',array('%d byte','%d bytes'),'$5-$3-$1','Zoeken','overal','Sorteren','Beperk','Acties','Kies','E-mail','Van','Onderwerp','Toevoegen','Bijlagen','Verzenden',array('%d e-mail verzonden.','%d e-mails verzonden.'),'nu','leeg','dd-mm-[jjjj]','Uitloggen','ltr','Server','Ongeldig CSRF token. Verstuur het formulier opnieuw.','Uitloggen geslaagd.','Sessies moeten geactiveerd zijn.','Uw sessie is verlopen. Gelieve opnieuw in te loggen.','Ongeldige logingegevens.','Geen extensie','Geen geldige PHP extensies beschikbaar (%s).','POST-data is te groot. Verklein de hoeveelheid data of verhoog de %s configuratie.','Item verwijderd.','Item aangepast.','Item%s toegevoegd.','Bewerk','Opslaan','Opslaan en verder bewerken','Opslaan, daarna toevoegen','Verwijderen',array('%d item aangepast.','%d items aangepast.'),'Dubbelklik op een waarde om deze te bewerken.',array('%d rij werd geïmporteerd.','%d rijen werden geïmporteerd.'),'Onmogelijk tabel te selecteren','Geen rijen.','bewerk','Relaties','Verhoog de lengte om deze waarde te bewerken.','Gebruik de link "bewerk" om deze waarde te wijzigen.','Pagina','laatste',array('%d rij','%d rijen'),'volledig resultaat','Dupliceer','Exporteren','CSV Import','Importeren','Zoeken in database','Tabel','Rijen','.','Gebruik 1 van volgende extensies: %s.');break;case"es":$E=array('Está seguro?','No es posible importar archivo.','Tamaño máximo de archivo es %sB.','Archivo no existe.','original','No existen tablas.','Idioma','Usar','Números','Fecha y hora','Cadena','Binario','Listas','Editor','Usuario','Contraseña','Login','Guardar contraseña','Nuevo Registro','Ultima página',array('%d byte','%d bytes'),'$5/$3/$1','Condición','donde sea','Ordenar','Limit','Acción','Mostrar','Email','De','Asunto','Agregar','Adjuntos','Enviar',array('%d email enviado.','%d emails enviados.'),'ahora','ningúno','dd/mm/[aaaa]','Logout','ltr','Servidor','Token CSRF inválido. Vuelva a enviar los datos del formulario.','Salida exitosa.','Deben estar habilitadas las sesiones.','Sesión expirada, por favor ingrese su clave de nuevo.','Identificacion inválida.','No hay extension','Ninguna de las extensiones PHP soportadas (%s) está disponible.','POST data demasiado grande. Reduzca el tamaño o aumente la directiva de configuración %s.','Registro eliminado.','Registro modificado.','Registro%s insertado.','Modificar','Guardar','Guardar y continuar editando','Guardar e insertar otro','Eliminar',array('%d ítem afectado.','%d itemes afectados.'),'Doble-clic sobre el valor para editarlo.',array('%d registro importado.','%d registros importados.'),'No es posible seleccionar la tabla','No existen registros.','modificar','Relaciones','Aumente el tamaño del campo de texto para modificar este valor.','Utilice el enlace de modificar para realizar los cambios.','Página','último',array('%d registro','%d registros'),'resultado completo','Clonar','Exportar','Importar CSV','Importar','Buscar datos en tablas','Tabla','Registros',' ','Por favor use una de las extensiones %s.');break;case"de":$E=array('Sind Sie sicher ?','Hochladen von Datei fehlgeschlagen.','Maximal erlaubte Dateigrösse ist %sB.','Datei existiert nicht.','Original','Keine Tabellen.','Sprache','Benutzung','Zahlen','Datum oder Zeit','Zeichenketten','Binär','Listen','Editor','Benutzer','Passwort','Login','Passwort speichern','Neuer Datensatz','Letzte Seite',array('%d Byte','%d Bytes'),'$6.$4.$1','Suchen','beliebig','Ordnen','Begrenzung','Aktion','Daten zeigen von','E-mail','Von','Betreff','Hinzufügen','Anhänge','Abschicken',array('%d e-mail abgeschickt.','%d e-mails abgeschickt.'),'jetzt','leer','t.m.[jjjj]','Abmelden','ltr','Server','CSRF Token ungültig. Bitte die Formulardaten erneut abschicken.','Abmeldung erfolgreich.','Sitzungen müssen aktiviert sein.','Sitzungsdauer abgelaufen, bitte erneut anmelden.','Ungültige Anmelde-Informationen.','Keine Erweiterungen installiert','Keine der unterstützten PHP-Erweiterungen (%s) ist vorhanden.','POST data zu gross. Reduzieren Sie die Grösse oder vergrössern Sie den Wert %s in der Konfiguration.','Datensatz gelöscht.','Datensatz geändert.','Datensatz%s hinzugefügt.','Ändern','Speichern','Speichern und weiter bearbeiten','Speichern und nächsten hinzufügen','Entfernen',array('%d Artikel betroffen.','%d Artikel betroffen.'),'Doppelklick zum Bearbeiten des Wertes.',array('%d Datensatz importiert.','%d Datensätze wurden importiert.'),'Auswahl der Tabelle fehlgeschlagen','Keine Daten.','ändern','Relationen','Vergrössern Sie die Textlänge um den Wert ändern zu können.','Benutzen Sie den Link zum editieren dieses Wertes.','Seite','letzte',array('%d Datensatz','%d Datensätze'),'Gesamtergebnis','Klonen','Exportieren','Importiere CSV','Importieren','Suche in Tabellen','Tabelle','Datensätze',' ','Bitte einen der Dateitypen %s benutzen.');break;case"fr":$E=array('Êtes-vous certain ?','Impossible d\'importer le fichier.','La taille maximale des fichiers est de %sB.','Le fichier est introuvable.','original','Aucune table.','Langue','Utiliser','Nombres','Date et heure','Chaînes','Binaires','Listes','Editeur','Utilisateur','Mot de passe','Authentification','Authentification permanente','Nouvel élément','Dernière page',array('%d octet','%d octets'),'$5/$3/$1','Rechercher','n\'importe où','Trier','Limite','Action','Select','Courriel','De','Sujet','Insérer','Pièces jointes','Envoyer',array('%d message a été envoyé.','%d messages ont été envoyés.'),'maintenant','vide','jj/mm/[aaaa]','Déconnexion','ltr','Serveur','Token CSRF invalide. Veuillez réenvoyer le formulaire.','Au revoir !','Veuillez activer les sessions.','Session expirée, veuillez vous authentifier à nouveau.','Authentification échouée.','Extension introuvable','Aucune des extensions PHP supportées (%s) n\'est disponible.','Données POST trop grandes. Réduisez la taille des données ou augmentez la valeur de %s dans la configuration de PHP.','L\'élément a été supprimé.','L\'élément a été modifié.','L\'élément%s a été inséré.','Modifier','Sauvegarder','Sauvegarder et continuer l\'édition','Sauvegarder et insérer le prochain','Effacer',array('%d élément a été modifié.','%d éléments ont été modifiés.'),'Double-cliquez sur une valeur pour la modifier.',array('%d ligne a été importée.','%d lignes ont été importées.'),'Impossible de sélectionner la table','Aucun résultat.','modifier','Relations','Augmentez la Longueur de texte affiché pour modifier cette valeur.','Utilisez le lien "modifier" pour modifier cette valeur.','Page','dernière',array('%d ligne','%d lignes'),'résultat entier','Cloner','Exporter','Importer CSV','Importer','Rechercher dans les tables','Table','Lignes',',','Veuillez utiliser l\'une des extensions %s.');break;case"it":$E=array('Sicuro?','Caricamento del file non riuscito.','La dimensione massima del file è %sB.','Il file non esiste.','originale','No tabelle.','Lingua','Usa','Numeri','Data e ora','Stringhe','Binari','Liste','Editor','Utente','Password','Autenticazione','Login permanente','Nuovo elemento','Ultima pagina',array('%d byte','%d bytes'),'$5/$3/$1','Cerca','ovunque','Ordina','Limite','Azione','Seleziona','E-mail','Da','Oggetto','Inserisci','Allegati','Invia',array('%d e-mail inviata.','%d e-mail inviate.'),'adesso','vuoto','dd/mm/[yyyy]','Esci','ltr','Server','Token CSRF non valido. Reinvia la richiesta.','Uscita effettuata con successo.','Le sessioni devono essere abilitate.','Sessione scaduta, autenticarsi di nuovo.','Credenziali non valide.','Estensioni non presenti','Nessuna delle estensioni PHP supportate (%s) disponibile.','Troppi dati via POST. Ridurre i dati o aumentare la direttiva di configurazione %s.','Elemento eliminato.','Elemento aggiornato.','Elemento%s inserito.','Modifica','Salva','Salva e continua','Salva e inserisci un altro','Elimina',array('Il risultato consiste in %d elemento.','Il risultato consiste in %d elementi.'),'Fai doppio click su un valore per modificarlo.',array('%d riga importata.','%d righe importate.'),'Selezione della tabella non riuscita','Nessuna riga.','modifica','Relazioni','Aumenta la Lunghezza del testo per modificare questo valore.','Usa il link modifica per modificare questo valore.','Pagina','ultima',array('%d riga','%d righe'),'intero risultato','Clona','Esporta','Importa da CSV','Importa','Cerca nelle tabelle','Tabella','Righe','.','Usa una delle estensioni %s.');break;case"et":$E=array('Kas oled kindel?','Faili üleslaadimine pole võimalik.','Maksimaalne failisuurus %sB.','Faili ei leitud.','originaal','Tabeleid ei leitud.','Keel','Kasuta','Numbrilised','Kuupäev ja kellaaeg','Tekstid','Binaar','Listid','Redaktor','Kasutajanimi','Parool','Logi sisse','Jäta mind meelde','Lisa kirje','Viimane lehekülg',array('%d bait','%d baiti'),'$6.$4.$1','Otsi','vahet pole','Sorteeri','Piira','Tegevus','Kuva','E-post','Kellelt','Pealkiri','Sisesta','Manused','Saada',array('Saadetud kirju: %d.','Saadetud kirju: %d.'),'nüüd','tühi','d.m.[yyyy]','Logi välja','ltr','Server','Sobimatu CSRF, palun postitage vorm uuesti.','Väljalogimine õnnestus.','Sessioonid peavad olema lubatud.','Sessioon on aegunud, palun logige uuesti sisse.','Ebakorrektsed andmed.','Ei leitud laiendust','Serveris pole ühtegi toetatud PHP laiendustest (%s).','POST-andmete maht on liialt suur. Palun vähendage andmeid või suurendage %s php-seadet.','Kustutamine õnnestus.','Uuendamine õnnestus.','Kirje%s on edukalt lisatud.','Muuda','Salvesta','Salvesta ja jätka muutmist','Salvesta ja lisa järgmine','Kustuta',array('Mõjutatud kirjeid: %d.','Mõjutatud kirjeid: %d.'),'Väärtuse muutmiseks topelt-kliki sellel.',array('Imporditi %d rida.','Imporditi %d rida.'),'Tabeli valimine ebaõnnestus','Sissekanded puuduvad.','muuda','Seosed','Väärtuse muutmiseks suurenda Tekstiveeru pikkust.','Väärtuse muutmiseks kasuta muutmislinki.','Lehekülg','viimane',array('%d rida','%d rida'),'Täielikud tulemused','Kloon','Ekspordi','Impordi CSV','Impordi','Otsi kogu andmebaasist','Tabel','Ridu',',','Palun kasuta üht laiendustest %s.');break;case"hu":$E=array('Biztos benne?','Nem tudom feltölteni a fájlt.','A maximális fájlméret %s B.','A fájl nem létezik.','eredeti','Nincs tábla.','Nyelv','Használ','Szám','Dátum és idő','Szöveg','Bináris','Lista','Szerkesztő','Felhasználó','Jelszó','Belépés','Emlékezz rám','Új tétel','Utolsó oldal',array('%d bájt','%d bájt','%d bájt'),'$6.$4.$1','Keresés','bárhol','Sorba rendezés','korlát','Művelet','Kiválaszt','E-mail','Feladó','Tárgy','Beszúr','Csatolmány','Küldés',array('%d e-mail elküldve.','%d e-mail elküldve.','%d e-mail elküldve.'),'most','üres','[yyyy].m.d','Kilépés','ltr','Szerver','Érvénytelen CSRF azonosító. Küldd újra az űrlapot.','Sikeres kilépés.','A munkameneteknek (session) engedélyezve kell lennie.','Munkamenet lejárt, jelentkezz be újra.','Érvénytelen adatok.','Nincs kiterjesztés','Nincs egy elérhető támogatott PHP kiterjesztés (%s) sem.','Túl sok a POST adat! Csökkentsd az adat méretét, vagy növeld a %s beállítást.','A tétel törölve.','A tétel frissítve.','%s tétel beszúrva.','Szerkeszt','Mentés','Mentés és szerkesztés folytatása','Mentés és újat beszúr','Törlés',array('%d tétel érintett.','%d tétel érintett.','%d tétel érintett.'),'Kattints kétszer az értékre a szerkesztéshez.',array('%d sor importálva.','%d sor importálva.','%d sor importálva.'),'Nem tudom kiválasztani a táblát','Nincs megjeleníthető eredmény.','szerkeszt','Reláció','Növeld a Szöveg hosszát, hogy módosítani tudd ezt az értéket.','Használd a szerkesztés hivatkozást ezen érték módosításához.','oldal','utoljára',array('%d sor','%d sor','%d sor'),'összes eredményt mutatása','Klónoz','Export','CSV importálása','Importálás','Keresés a táblákban','Tábla','Oszlop',' ','Használja a(z) %s kiterjesztést.');break;case"ca":$E=array('Estàs segur?','Impossible adjuntar el fitxer.','La mida màxima permesa del fitxer és de %sB.','El fitxer no existeix.','original','No hi ha cap taula.','Idioma','Utilitza','Nombres','Data i hora','Cadenes','Binari','Llistes','Editor','Nom d\'usuari','Contrasenya','Inicia la sessió','Sessió permanent','Nou element','Darrera plana',array('%d byte','%d bytes'),'$5/$3/$1','Cerca','a qualsevol lloc','Ordena','Límit','Acció','Selecciona','Correu electrònic','De','Assumpte','Insereix','Adjuncions','Envia',array('S\'ha enviat %d correu electrònic.','S\'han enviat %d correus electrònics.'),'ara','buit','dd/mm/[aaaa]','Desconnecta','ltr','Servidor','Token CSRF invàlid. Torna a enviar el formulari.','Desconnexió correcta.','Cal que estigui permès l\'us de sessions.','La sessió ha expirat, torna a iniciar-ne una.','Credencials invàlids.','Cap extensió','No hi ha cap de les extensions PHP soporatades (%s) disponible.','Les dades POST són massa grans. Redueix les dades o incrementa la directiva de configuració %s.','S\'ha suprmit l\'element.','S\'ha actualitzat l\'element.','S\'ha insertat l\'element%s.','Edita','Desa','Desa i segueix editant','Desa i insereix el següent','Suprimeix',array('S\'ha modificat %d element.','S\'han modificat %d elements.'),'Fes un doble clic a un valor per modificar-lo.',array('S\'ha importat %d fila.','S\'han importat %d files.'),'Impossible seleccionar la taula','No hi ha cap fila.','edita','Relacions','Incrementa la Longitud del text per modificar aquest valor.','Utilitza l\'enllaç d\'edició per modificar aquest valor.','Plana','darrera',array('%d fila','%d files'),'tots els resultats','Clona','Exporta','Importa CSV','Importa','Cerca dades en les taules','Taula','Files',',','Si us plau, utilitza una de les extensions %s.');break;case"ru":$E=array('Вы уверены?','Не удалось загрузить файл на сервер.','Максимальный разрешенный размер файла - %sB.','Такого файла не существует.','исходный','В базе данных нет таблиц.','Язык','Выбрать','Число','Дата и время','Строки','Двоичный тип','Списки','Редактор','Имя пользователя','Пароль','Войти','Оставаться в системе','Новая запись','Последняя страница',array('%d байт','%d байта','%d байтов'),'$5.$3.$1','Поиск','в любом месте','Сортировать','Лимит','Действие','Выбрать','Электропочта','От','Кому','Вставить','Прикрепленные файлы','Послать',array('Было отправлено %d письмо.','Было отправлено %d письма.','Было отправлено %d писем.'),'сейчас','пусто','дд.мм.[гггг]','Выйти','ltr','Сервер','Недействительный CSRF токен. Отправите форму ещё раз.','Вы успешно покинули систему.','Сессии должны быть включены.','Срок действия сесси истек, нужно снова войти в систему.','Неправильное имя пользователя или пароль.','Нет расширений','Не доступно ни одного расширения из поддерживаемых (%s).','Слишком большой объем POST-данных. Пошлите меньший объем данных или увеличьте параметр конфигурационной директивы %s.','Запись удалена.','Запись обновлена.','Запись%s была вставлена.','Редактировать','Сохранить','Сохранить и продолжить редактирование','Сохранить и вставить еще','Стереть',array('Была изменена %d запись.','Были изменены %d записи.','Было изменено %d записей.'),'Кликни два раза по значению, чтобы его изменить.',array('Импортирована %d строка.','Импортировано %d строки.','Импортировано %d строк.'),'Не удалось получить данные из таблицы','Нет записей.','редактировать','Реляции','Увеличь Длину текста, чтобы изменить это значение.','Изменить это значение можно с помощью ссылки «изменить».','Страница','последняя',array('%d строка','%d строки','%d строк'),'весь результат','Клонировать','Экспорт','Импорт CSV','Импорт','Поиск в таблицах','Таблица','Строк',' ','Используйте одно из этих расширений %s.');break;case"zh":$E=array('你确定吗？','不能上传文件。','最多允许的文件大小为 %sB','文件不存在。','原始','没有表。','语言','使用','数字','日期时间','字符串','二进制','列表','编辑器','用户名','密码','登录','保持登录','新建项','末页','%d 字节','$1.$3.$5','搜索','任意位置','排序','限定','动作','选择','电子邮件','来自','主题','插入','附件','发送','%d 封邮件已发送。','现在','空','[yyyy].mm.dd','注销','ltr','服务器','无效 CSRF 令牌。重新发送表单。','注销成功。','会话必须被启用。','会话已过期，请重新登录。','无效凭据。','没有扩展','没有支持的 PHP 扩展可用（%s）。','太大的 POST 数据。减少数据或者增加 %s 配置命令。','已删除项目。','已更新项目。','已插入项目%s。','编辑','保存','保存并继续编辑','保存并插入下一个','删除','%d 个项目受到影响。','在值上双击类修改它。','%d 行已导入。','不能选择该表','没有行。','编辑','关联信息','增加文本长度以修改该值。','使用编辑链接来修改该值。','页面','最后','%d 行','所有结果','克隆','导出','CSV 导入','导入','在表中搜索数据','表','行数',',','请使用这些扩展中的一个：%s。');break;case"zh-tw":$E=array('你確定嗎？','無法上傳檔案。','允許的檔案上限大小為%sB','檔案不存在','原始','沒有資料表。','語言','使用','數字','日期時間','字符串','二進制','列表','編輯器','帳號','密碼','登入','永久登入','新建項','最後一頁','%d byte(s)','$1.$3.$5','搜尋','任意位置','排序','限定','動作','選擇','電子郵件','來自','主題','插入','附件','發送','已發送 %d 封郵件。','現在','空值','[yyyy].mm.dd','登出','ltr','伺服器','無效的 CSRF token。請重新發送表單。','登出成功。','Session 必須被啟用。','Session 已過期，請重新登入。','無效的憑證。','沒有 擴充模組','沒有任何支援的PHP擴充模組（%s）。','POST 資料太大。減少資料或者增加 %s 的設定值。','該項目已被刪除','已更新項目。','已插入項目%s。','編輯','儲存','保存並繼續編輯','儲存並插入下一個','刪除','%d個項目受到影響。','雙擊以進行修改。','%d行已導入。','無法選擇該資料表','沒有行。','編輯','關聯','增加字串長度來修改。','使用編輯連結來修改。','頁','最後一頁','%d行','所有結果','複製','匯出','匯入 CSV','匯入','在資料庫搜尋','資料表','行數',',','請使用下列其中一個 extension %s。');break;case"ja":$E=array('実行しますか？','ファイルをアップロードできません','最大ファイルサイズ %sB','ファイルは存在しません','元','テーブルがありません。','言語','使用','数字','日時','文字列','バイナリ','リスト','エディタ','ユーザ名','パスワード','ログイン','永続的にログイン','項目の作成','最後のページ','%d バイト','$1.$3.$5','検索','任意','ソート','制約','動作','選択','メール','差出人','題名','挿入','添付ファイル','送信','%d メールを送信しました','現在の日時','空','[yyyy].mm.dd','ログアウト','ltr','サーバ','不正なCSRFトークン。再送信してください','ログアウト','セッションを有効にしてください','セッションの期限切れ。ログインし直してください','不正なログイン','拡張機能がありません','PHPの拡張機能（%s）がセットアップされていません','POSTデータが大きすぎます。データサイズを小さくするか %s 設定を大きくしてください','項目を削除しました','項目を更新しました','%s項目を挿入しました','編集','保存','保存して継続','保存／追加','削除','%d を更新しました','ダブルクリックして編集','%d 行をインポートしました','テーブルを選択できません','行がありません','編集','関係','編集枠を広げる','リンクを編集する','ページ','最終','%d 行','全結果','クローン','エクスポート','CSV インポート','インポート','データを検索する','テーブル','行数',',','いずれかの拡張機能を使ってください %s');break;case"ta":$E=array('நிச்ச‌ய‌மாக‌ ?','கோப்பை மேலேற்ற‌ம் (upload) செய்ய‌ இயல‌வில்லை.','கோப்பின் அதிக‌ப‌ட்ச‌ அள‌வு %sB.','கோப்பு இல்லை.','அச‌ல்','அட்ட‌வ‌ணை இல்லை.','மொழி','உப‌யோகி','எண்க‌ள்','தேதி ம‌ற்றும் நேர‌ம்','ச‌ர‌ம் (String)','பைன‌ரி','ப‌ட்டிய‌ல்','தொகுப்பாளர்','ப‌ய‌னாள‌ர் (User)','க‌ட‌வுச்சொல்','நுழை','நிர‌ந்த‌ர‌மாக‌ நுழைய‌வும்','புதிய‌ உருப்ப‌டி','க‌டைசி ப‌க்க‌ம்',array('%d பைட்','%d பைட்டுக‌ள்'),'$5/$3/$1','தேடு','எங்காயினும்','த‌ர‌ம் பிரி','வ‌ர‌ம்பு','செய‌ல்','தேர்வு செய்','மின்ன‌ஞ்ச‌ல்','அனுப்புனர்','பொருள்','புகுத்து','இணைப்புக‌ள்','அனுப்பு',array('%d மின்ன‌ஞ்ச‌ல் அனுப்ப‌ப‌ட்ட‌து.','%d மின்ன‌ஞ்ச‌ல்க‌ள் அனுப்ப‌ப்ப‌ட்ட‌ன‌.'),'இப்பொழுது','வெறுமை (empty)','dd/mm/[yyyy]','வெளியேறு','ltr','வ‌ழ‌ங்கி (Server)','CSRF டோக்க‌ன் செல்லாது. ப‌டிவ‌த்தை மீண்டும் அனுப்ப‌வும்.','வெற்றிக‌ர‌மாய் வெளியேறியாயிற்று.','செஷ‌ன் ஆத‌ர‌வு இய‌க்க‌ப்ப‌ட‌ வேண்டும்.','செஷ‌ன் காலாவ‌தியாகி விட்ட‌து. மீண்டும் நுழைய‌வும்.','ச‌ரியான‌ விப‌ர‌ங்க‌ள் இல்லை.','விரிவு (extensஇஒன்) இல்லை ','PHP ஆத‌ர‌வு விரிவுக‌ள் (%s) இல்லை.','மிக‌ அதிக‌மான‌ POST  த‌க‌வ‌ல். த‌க‌வ‌லை குறைக்க‌வும் அல்ல‌து %s வ‌டிவ‌மைப்பை (configuration directive) மாற்ற‌வும்.','உருப்படி நீக்க‌ப்ப‌ட்ட‌து.','உருப்ப‌டி புதுப்பிக்க‌ப்ப‌ட்ட‌து.','உருப்ப‌டி (Item) சேர்க்க‌ப்ப‌ட்ட‌து.','தொகு','சேமி','சேமித்த‌ பிற‌கு தொகுப்ப‌தை தொட‌ர‌வும்','சேமித்த‌ப் பின் அடுத்த‌தை புகுத்து','நீக்கு',array('%d உருப்ப‌டி மாற்ற‌ம‌டைந்தது.','%d உருப்ப‌டிக‌ள் மாற்ற‌ம‌டைந்த‌ன‌.'),'ம‌திப்பினை மாற்ற அத‌ன் மீது இருமுறை சொடுக்க‌வும் (Double click).',array('%d வ‌ரிசை இற‌க்கும‌தி (Import) செய்ய‌ப்ப‌ட்ட‌து.','%d வ‌ரிசைக‌ள் இற‌க்கும‌தி (Import) செய்ய‌ப்ப‌ட்டன‌.'),'அட்ட‌வ‌ணையை தேர்வு செய்ய‌ முடிய‌வில்லை','வ‌ரிசை இல்லை.','தொகு','உற‌வுக‌ள் (Relations)','இந்த‌ ம‌திப்பினை மாற்ற, டெக்ஸ்ட் நீள‌த்தினை அதிக‌ரிக்க‌வும்.','இந்த‌ ம‌திப்பினை மாற்ற‌, தொகுப்பு இணைப்பினை உப‌யோகிக்க‌வும்.','ப‌க்க‌ம்','க‌டைசி',array('%d வ‌ரிசை','%d வ‌ரிசைக‌ள்'),'முழுமையான‌ முடிவு','ந‌க‌லி (Clone)','ஏற்றும‌தி','இம்போர்ட் CSV','இற‌க்கும‌தி (Import)','த‌க‌வ‌லை அட்ட‌வ‌ணையில் தேடு','அட்ட‌வ‌ணை','வ‌ரிசைக‌ள்',',','த‌ய‌வு செய்து ஒரு விரிவினை %s (extension) உப‌யோகிக்க‌வும்.');break;case"ar":$E=array('هل أنت متأكد؟','من غير الممكن رفع الملف.','حجم الملف الأقصى هو %sB.','الملف غير موجود.','الأصلي','لا توجد جداول.','اللغة','المستعمل','أعداد','التاريخ و الوقت','سلاسل','ثنائية','قوائم','المحرر','المستعمل','كلمة المرور','تسجيل الدخول','تسجيل دخول دائم','عنصر جديد','الصفحة السابقة','%d بايت','$5/$3/$1','بحث','في اي مكان','ترتيب','حد','حركة','إختيار','البريد الإلكتروني','من','الموضوع','إنشاء','ملفات مرفقة.','إرسال','تم إرسال %d رسالة.','الآن','فارغ','jj/mm/[aaaa]','تسجيل الخروج','rtl','الخادم','CSRF Token خاطئ. من فضلك أعد إرسال الإستمارة.','مع السلامة.','عليك تفعيل نظام الجلسات.','إنتهت الجلسة، من فضلك أعد تسجيل الدخول.','فشل في تسجيل الدخول.','إمتداد غير موجود','إمتدادات php المدعومة غير موجودة.','معلومات POST كبيرة جدا. قم بتقليص حجم المعلومات أو قم بزيادة قيمة %s في خيارات ال PHP.','تم حذف العنصر.','تم تعديل العنصر.','تم إدراج العنصر.','تعديل','حفظ','إحفظ و واصل التعديل','جفظ و إنشاء التالي','مسح','عدد العناصر المعدلة هو %d.','أنقر نقرا مزدوجا على قيمة لتعديلها.','عدد الأسطر المستوردة هو %d.','من غير الممكن إختيار الجدول','لا توجد نتائج.','تعديل','علاقات','قم بزيادة طول النص لتعديل القيمة.','إستعمل الرابط "تعديل" لتعديل هذه القيمة.','صفحة','الأخيرة','%d أسطر','نتيجة كاملة','نسخ','تصدير','إستيراد CSV','إستيراد','بحث في الجداول','جدول','الأسطر',',','من فضلك إستعمل إحدى الغمتدادات: %s.');break;}if(extension_loaded('pdo')){class
Min_PDO
extends
PDO{var$_result,$server_info,$affected_rows,$error;function
__construct(){}function
dsn($Bd,$D,$R,$zd='auth_error'){set_exception_handler($zd);parent::__construct($Bd,$D,$R);restore_exception_handler();$this->setAttribute(13,array('Min_PDOStatement'));$this->server_info=$this->getAttribute(4);}function
query($m,$Na=false){$i=parent::query($m);if(!$i){$xd=$this->errorInfo();$this->error=$xd[2];return
false;}$this->store_result($i);return$i;}function
multi_query($m){return$this->_result=$this->query($m);}function
store_result($i=null){if(!$i){$i=$this->_result;}if($i->columnCount()){$i->num_rows=$i->rowCount();return$i;}$this->affected_rows=$i->rowCount();return
true;}function
next_result(){return$this->_result->nextRowset();}function
result($m,$e=0){$i=$this->query($m);if(!$i){return
false;}$d=$i->fetch();return$d[$e];}}class
Min_PDOStatement
extends
PDOStatement{var$_offset=0,$num_rows;function
fetch_assoc(){return$this->fetch(2);}function
fetch_row(){return$this->fetch(3);}function
fetch_field(){$d=(object)$this->getColumnMeta($this->_offset++);$d->orgtable=$d->table;$d->orgname=$d->name;$d->charsetnr=(in_array("blob",$d->flags)?63:0);return$d;}}}$Aa=array();$Aa=array("server"=>"MySQL")+$Aa;if(!defined("DRIVER")){$pd=array("MySQLi","MySQL","PDO_MySQL");define("DRIVER","server");if(extension_loaded("mysqli")){class
Min_DB
extends
MySQLi{var$extension="MySQLi";function
Min_DB(){parent::init();}function
connect($C,$D,$R){mysqli_report(MYSQLI_REPORT_OFF);list($gd,$tb)=explode(":",$C,2);$c=@$this->real_connect(($C!=""?$gd:ini_get("mysqli.default_host")),("$C$D"!=""?$D:ini_get("mysqli.default_user")),("$C$D$R"!=""?$R:ini_get("mysqli.default_pw")),null,(is_numeric($tb)?$tb:ini_get("mysqli.default_port")),(!is_numeric($tb)?$tb:null));if($c){if(method_exists($this,'set_charset')){$this->set_charset("utf8");}else{$this->query("SET NAMES utf8");}}return$c;}function
result($m,$e=0){$i=$this->query($m);if(!$i){return
false;}$d=$i->fetch_array();return$d[$e];}function
quote($z){return"'".$this->escape_string($z)."'";}}}elseif(extension_loaded("mysql")){class
Min_DB{var$extension="MySQL",$server_info,$affected_rows,$error,$_link,$_result;function
connect($C,$D,$R){$this->_link=@mysql_connect(($C!=""?$C:ini_get("mysql.default_host")),("$C$D"!=""?$D:ini_get("mysql.default_user")),("$C$D$R"!=""?$R:ini_get("mysql.default_password")),true,131072);if($this->_link){$this->server_info=mysql_get_server_info($this->_link);if(function_exists('mysql_set_charset')){mysql_set_charset("utf8",$this->_link);}else{$this->query("SET NAMES utf8");}}else{$this->error=mysql_error();}return(bool)$this->_link;}function
quote($z){return"'".mysql_real_escape_string($z,$this->_link)."'";}function
select_db($Ra){return
mysql_select_db($Ra,$this->_link);}function
query($m,$Na=false){$i=@($Na?mysql_unbuffered_query($m,$this->_link):mysql_query($m,$this->_link));if(!$i){$this->error=mysql_error($this->_link);return
false;}if($i===true){$this->affected_rows=mysql_affected_rows($this->_link);$this->info=mysql_info($this->_link);return
true;}return
new
Min_Result($i);}function
multi_query($m){return$this->_result=$this->query($m);}function
store_result(){return$this->_result;}function
next_result(){return
false;}function
result($m,$e=0){$i=$this->query($m);if(!$i){return
false;}return
mysql_result($i->_result,0,$e);}}class
Min_Result{var$num_rows,$_result,$_offset=0;function
Min_Result($i){$this->_result=$i;$this->num_rows=mysql_num_rows($i);}function
fetch_assoc(){return
mysql_fetch_assoc($this->_result);}function
fetch_row(){return
mysql_fetch_row($this->_result);}function
fetch_field(){$c=mysql_fetch_field($this->_result,$this->_offset++);$c->orgtable=$c->table;$c->orgname=$c->name;$c->charsetnr=($c->blob?63:0);return$c;}function
__destruct(){mysql_free_result($this->_result);}}}elseif(extension_loaded("pdo_mysql")){class
Min_DB
extends
Min_PDO{var$extension="PDO_MySQL";function
connect($C,$D,$R){$this->dsn("mysql:host=".str_replace(":",";unix_socket=",preg_replace('~:(\\d)~',';port=\\1',$C)),$D,$R);$this->query("SET NAMES utf8");return
true;}function
select_db($Ra){return$this->query("USE ".idf_escape($Ra));}function
query($m,$Na=false){$this->setAttribute(1000,!$Na);return
parent::query($m,$Na);}}}function
idf_escape($O){return"`".str_replace("`","``",$O)."`";}function
table($O){return
idf_escape($O);}function
connect(){global$j;$g=new
Min_DB;$Vb=$j->credentials();if($g->connect($Vb[0],$Vb[1],$Vb[2])){$g->query("SET SQL_QUOTE_SHOW_CREATE=1");return$g;}return$g->error;}function
get_databases($ed=true){$c=&get_session("dbs");if(!isset($c)){if($ed){restart_session();ob_flush();flush();}$c=get_vals("SHOW DATABASES");}return$c;}function
limit($m,$p,$B,$Nc=0,$ua=" "){return" $m$p".(isset($B)?$ua."LIMIT $B".($Nc?" OFFSET $Nc":""):"");}function
limit1($m,$p){return
limit($m,$p,1);}function
db_collation($va,$cd){global$g;$c=null;$bb=$g->result("SHOW CREATE DATABASE ".idf_escape($va),1);if(preg_match('~ COLLATE ([^ ]+)~',$bb,$h)){$c=$h[1];}elseif(preg_match('~ CHARACTER SET ([^ ]+)~',$bb,$h)){$c=$cd[$h[1]][0];}return$c;}function
engines(){$c=array();foreach(get_rows("SHOW ENGINES")as$d){if(ereg("YES|DEFAULT",$d["Support"])){$c[]=$d["Engine"];}}return$c;}function
logged_user(){global$g;return$g->result("SELECT USER()");}function
tables_list(){global$g;return
get_key_vals("SHOW".($g->server_info>=5?" FULL":"")." TABLES");}function
count_tables($ja){$c=array();foreach($ja
as$va){$c[$va]=count(get_vals("SHOW TABLES IN ".idf_escape($va)));}return$c;}function
table_status($f=""){$c=array();foreach(get_rows("SHOW TABLE STATUS".($f!=""?" LIKE ".q(addcslashes($f,"%_")):""))as$d){if($d["Engine"]=="InnoDB"){$d["Comment"]=preg_replace('~(?:(.+); )?InnoDB free: .*~','\\1',$d["Comment"]);}if(!isset($d["Rows"])){$d["Comment"]="";}if($f!=""){return$d;}$c[$d["Name"]]=$d;}return$c;}function
is_view($I){return!isset($I["Rows"]);}function
fk_support($I){return($I["Engine"]=="InnoDB");}function
fields($l){$c=array();foreach(get_rows("SHOW FULL COLUMNS FROM ".table($l))as$d){preg_match('~^([^( ]+)(?:\\((.+)\\))?( unsigned)?( zerofill)?$~',$d["Type"],$h);$c[$d["Field"]]=array("field"=>$d["Field"],"full_type"=>$d["Type"],"type"=>$h[1],"length"=>$h[2],"unsigned"=>ltrim($h[3].$h[4]),"default"=>($d["Default"]!=""||ereg("char",$h[1])?$d["Default"]:null),"null"=>($d["Null"]=="YES"),"auto_increment"=>($d["Extra"]=="auto_increment"),"on_update"=>(eregi('^on update (.+)',$d["Extra"],$h)?$h[1]:""),"collation"=>$d["Collation"],"privileges"=>array_flip(explode(",",$d["Privileges"])),"comment"=>$d["Comment"],"primary"=>($d["Key"]=="PRI"),);}return$c;}function
indexes($l,$fa=null){global$g;if(!is_object($fa)){$fa=$g;}$c=array();foreach(get_rows("SHOW INDEX FROM ".table($l),$fa)as$d){$c[$d["Key_name"]]["type"]=($d["Key_name"]=="PRIMARY"?"PRIMARY":($d["Index_type"]=="FULLTEXT"?"FULLTEXT":($d["Non_unique"]?"INDEX":"UNIQUE")));$c[$d["Key_name"]]["columns"][]=$d["Column_name"];$c[$d["Key_name"]]["lengths"][]=$d["Sub_part"];}return$c;}function
foreign_keys($l){global$g,$Mb;static$V='`(?:[^`]|``)+`';$c=array();$Rc=$g->result("SHOW CREATE TABLE ".table($l),1);if($Rc){preg_match_all("~CONSTRAINT ($V) FOREIGN KEY \\(((?:$V,? ?)+)\\) REFERENCES ($V)(?:\\.($V))? \\(((?:$V,? ?)+)\\)(?: ON DELETE (".implode("|",$Mb)."))?(?: ON UPDATE (".implode("|",$Mb)."))?~",$Rc,$H,PREG_SET_ORDER);foreach($H
as$h){preg_match_all("~$V~",$h[2],$Nb);preg_match_all("~$V~",$h[5],$Ob);$c[idf_unescape($h[1])]=array("db"=>idf_unescape($h[4]!=""?$h[3]:$h[4]),"table"=>idf_unescape($h[4]!=""?$h[4]:$h[3]),"source"=>array_map('idf_unescape',$Nb[0]),"target"=>array_map('idf_unescape',$Ob[0]),"on_delete"=>$h[6],"on_update"=>$h[7],);}}return$c;}function
view($f){global$g;return
array("select"=>preg_replace('~^(?:[^`]|`[^`]*`)*\\s+AS\\s+~isU','',$g->result("SHOW CREATE VIEW ".table($f),1)));}function
collations(){$c=array();foreach(get_rows("SHOW COLLATION")as$d){$c[$d["Charset"]][]=$d["Collation"];}ksort($c);foreach($c
as$b=>$a){sort($c[$b]);}return$c;}function
information_schema($va){global$g;return($g->server_info>=5&&$va=="information_schema");}function
error(){global$g;return
h(preg_replace('~^You have an error.*syntax to use~U',"Syntax error",$g->error));}function
exact_value($a){return
q($a)." COLLATE utf8_bin";}function
create_database($va,$xa){set_session("dbs",null);return
queries("CREATE DATABASE ".idf_escape($va).($xa?" COLLATE ".q($xa):""));}function
drop_databases($ja){set_session("dbs",null);return
apply_queries("DROP DATABASE",$ja,'idf_escape');}function
rename_database($f,$xa){if(create_database($f,$xa)){$Ea=array();foreach(tables_list()as$l=>$Ba){$Ea[]=table($l)." TO ".idf_escape($f).".".table($l);}if(!$Ea||queries("RENAME TABLE ".implode(", ",$Ea))){queries("DROP DATABASE ".idf_escape(DB));return
true;}}return
false;}function
auto_increment(){$Pb=" PRIMARY KEY";if($_GET["create"]!=""&&$_POST["auto_increment_col"]){foreach(indexes($_GET["create"])as$U){if(in_array($_POST["fields"][$_POST["auto_increment_col"]]["orig"],$U["columns"],true)){$Pb="";break;}if($U["type"]=="PRIMARY"){$Pb=" UNIQUE";}}}return" AUTO_INCREMENT$Pb";}function
alter_table($l,$f,$r,$dd,$hd,$Bc,$xa,$db,$id){$ha=array();foreach($r
as$e){$ha[]=($e[1]?($l!=""?($e[0]!=""?"CHANGE ".idf_escape($e[0]):"ADD"):" ")." ".implode($e[1]).($l!=""?" $e[2]":""):"DROP ".idf_escape($e[0]));}$ha=array_merge($ha,$dd);$_c="COMMENT=".q($hd).($Bc?" ENGINE=".q($Bc):"").($xa?" COLLATE ".q($xa):"").($db!=""?" AUTO_INCREMENT=$db":"").$id;if($l==""){return
queries("CREATE TABLE ".table($f)." (\n".implode(",\n",$ha)."\n) $_c");}if($l!=$f){$ha[]="RENAME TO ".table($f);}$ha[]=$_c;return
queries("ALTER TABLE ".table($l)."\n".implode(",\n",$ha));}function
alter_indexes($l,$ha){foreach($ha
as$b=>$a){$ha[$b]=($a[2]?"\nDROP INDEX ":"\nADD $a[0] ".($a[0]=="PRIMARY"?"KEY ":"")).$a[1];}return
queries("ALTER TABLE ".table($l).implode(",",$ha));}function
truncate_tables($pa){return
apply_queries("TRUNCATE TABLE",$pa);}function
drop_views($Ub){return
queries("DROP VIEW ".implode(", ",array_map('table',$Ub)));}function
drop_tables($pa){return
queries("DROP TABLE ".implode(", ",array_map('table',$pa)));}function
move_tables($pa,$Ub,$Ob){$Ea=array();foreach(array_merge($pa,$Ub)as$l){$Ea[]=table($l)." TO ".idf_escape($Ob).".".table($l);}return
queries("RENAME TABLE ".implode(", ",$Ea));}function
trigger($f){$v=get_rows("SHOW TRIGGERS WHERE `Trigger` = ".q($f));return
reset($v);}function
triggers($l){$c=array();foreach(get_rows("SHOW TRIGGERS LIKE ".q(addcslashes($l,"%_")))as$d){$c[$d["Trigger"]]=array($d["Timing"],$d["Event"]);}return$c;}function
trigger_options(){return
array("Timing"=>array("BEFORE","AFTER"),"Type"=>array("FOR EACH ROW"),);}function
routine($f,$Ba){global$g,$Hc,$md,$Ia;$jd=array("bool","boolean","integer","double precision","real","dec","numeric","fixed","national char","national varchar");$ac="((".implode("|",array_merge(array_keys($Ia),$jd)).")(?:\\s*\\(((?:[^'\")]*|$Hc)+)\\))?\\s*(zerofill\\s*)?(unsigned(?:\\s+zerofill)?)?)(?:\\s*(?:CHARSET|CHARACTER\\s+SET)\\s*['\"]?([^'\"\\s]+)['\"]?)?";$V="\\s*(".($Ba=="FUNCTION"?"":implode("|",$md)).")?\\s*(?:`((?:[^`]|``)*)`\\s*|\\b(\\S+)\\s+)$ac";$bb=$g->result("SHOW CREATE $Ba ".idf_escape($f),2);preg_match("~\\(((?:$V\\s*,?)*)\\)".($Ba=="FUNCTION"?"\\s*RETURNS\\s+$ac":"")."\\s*(.*)~is",$bb,$h);$r=array();preg_match_all("~$V\\s*,?~is",$h[1],$H,PREG_SET_ORDER);foreach($H
as$ia){$f=str_replace("``","`",$ia[2]).$ia[3];$r[]=array("field"=>$f,"type"=>strtolower($ia[5]),"length"=>preg_replace_callback("~$Hc~s",'normalize_enum',$ia[6]),"unsigned"=>strtolower(preg_replace('~\\s+~',' ',trim("$ia[8] $ia[7]"))),"full_type"=>$ia[4],"inout"=>strtoupper($ia[1]),"collation"=>strtolower($ia[9]),);}if($Ba!="FUNCTION"){return
array("fields"=>$r,"definition"=>$h[11]);}return
array("fields"=>$r,"returns"=>array("type"=>$h[12],"length"=>$h[13],"unsigned"=>$h[15],"collation"=>$h[16]),"definition"=>$h[17],);}function
routines(){return
get_rows("SELECT * FROM information_schema.ROUTINES WHERE ROUTINE_SCHEMA = ".q(DB));}function
begin(){return
queries("BEGIN");}function
insert_into($l,$t){return
queries("INSERT INTO ".table($l)." (".implode(", ",array_keys($t)).")\nVALUES (".implode(", ",$t).")");}function
insert_update($l,$t,$mb){foreach($t
as$b=>$a){$t[$b]="$b = $a";}$ea=implode(", ",$t);return
queries("INSERT INTO ".table($l)." SET $ea ON DUPLICATE KEY UPDATE $ea");}function
last_id(){global$g;return$g->result("SELECT LAST_INSERT_ID()");}function
explain($g,$m){return$g->query("EXPLAIN $m");}function
types(){return
array();}function
schemas(){return
array();}function
get_schema(){return"";}function
set_schema($Dd){return
true;}function
create_sql($l,$db){global$g;$c=$g->result("SHOW CREATE TABLE ".table($l),1);if(!$db){$c=preg_replace('~ AUTO_INCREMENT=\\d+~','',$c);}return$c;}function
truncate_sql($l){return"TRUNCATE ".table($l);}function
use_sql($Ra){return"USE ".idf_escape($Ra);}function
trigger_sql($l,$qc){$c="";foreach(get_rows("SHOW TRIGGERS LIKE ".q(addcslashes($l,"%_")),null,"-- ")as$d){$c.="\n".($qc=='CREATE+ALTER'?"DROP TRIGGER IF EXISTS ".idf_escape($d["Trigger"]).";;\n":"")."CREATE TRIGGER ".idf_escape($d["Trigger"])." $d[Timing] $d[Event] ON ".table($d["Table"])." FOR EACH ROW\n$d[Statement];;\n";}return$c;}function
show_variables(){return
get_key_vals("SHOW VARIABLES");}function
show_status(){return
get_key_vals("SHOW STATUS");}function
support($ld){global$g;return!ereg("scheme|sequence|type".($g->server_info<5.1?"|event|partitioning".($g->server_info<5?"|view|routine|trigger":""):""),$ld);}$za="sql";$Ia=array();$kd=array();foreach(array(lang(8)=>array("tinyint"=>3,"smallint"=>5,"mediumint"=>8,"int"=>10,"bigint"=>20,"decimal"=>66,"float"=>12,"double"=>21),lang(9)=>array("date"=>10,"datetime"=>19,"timestamp"=>19,"time"=>10,"year"=>4),lang(10)=>array("char"=>255,"varchar"=>65535,"tinytext"=>255,"text"=>65535,"mediumtext"=>16777215,"longtext"=>4294967295),lang(11)=>array("bit"=>20,"binary"=>255,"varbinary"=>65535,"tinyblob"=>255,"blob"=>65535,"mediumblob"=>16777215,"longblob"=>4294967295),lang(12)=>array("enum"=>65535,"set"=>64),)as$b=>$a){$Ia+=$a;$kd[$b]=array_keys($a);}$Cd=array("unsigned","zerofill","unsigned zerofill");$od=array("=","<",">","<=",">=","!=","LIKE","LIKE %%","REGEXP","IN","IS NULL","NOT LIKE","NOT REGEXP","NOT IN","IS NOT NULL");$ga=array("char_length","date","from_unixtime","hex","lower","round","sec_to_time","time_to_sec","upper");$Id=array("avg","count","count distinct","group_concat","max","min","sum");$Hd=array(array("char"=>"md5/sha1/password/encrypt/uuid","binary"=>"md5/sha1/hex","date|time"=>"now",),array("int|float|double|decimal"=>"+/-","date"=>"+ interval/- interval","time"=>"addtime/subtime","char|text"=>"concat",));}define("SERVER",$_GET[DRIVER]);define("DB",$_GET["db"]);define("ME",preg_replace('~^[^?]*/([^?]*).*~','\\1',$_SERVER["REQUEST_URI"]).'?'.(SID&&!$_COOKIE?SID.'&':'').(SERVER!==null?DRIVER."=".urlencode(SERVER).'&':'').(isset($_GET["username"])?"username=".urlencode($_GET["username"]).'&':'').(DB!=""?'db='.urlencode(DB).'&'.(isset($_GET["ns"])?"ns=".urlencode($_GET["ns"])."&":""):''));$Cb="3.1.0";class
Adminer{var$operators=array("<=",">=");var$_values=array();function
name(){return
lang(13);}function
credentials(){return
array(SERVER,$_GET["username"],get_session("pwds"));}function
permanentLogin(){return
password_file();}function
database(){global$g;$ja=get_databases(false);return(!$ja?$g->result("SELECT SUBSTRING_INDEX(CURRENT_USER, '@', 1)"):$ja[(information_schema($ja[0])?1:0)]);}function
headers(){header("X-Frame-Options: deny");header("X-XSS-Protection: 0");}function
loginForm(){echo'<table cellspacing="0">
<tr><th>',lang(14),'<td><input type="hidden" name="driver" value="server"><input type="hidden" name="server" value=""><input id="username" name="username" value="',h($_GET["username"]),'">
<tr><th>',lang(15),'<td><input type="password" name="password">
</table>
<script type="text/javascript">
document.getElementById(\'username\').focus();
</script>
',"<p><input type='submit' value='".lang(16)."'>\n",checkbox("permanent",1,$_COOKIE["adminer_permanent"],lang(17))."\n";}function
login($Fd,$R){return
true;}function
tableName($Ya){return
h($Ya["Comment"]!=""?$Ya["Comment"]:$Ya["Name"]);}function
fieldName($e,$ca=0){return
h($e["comment"]!=""?$e["comment"]:$e["field"]);}function
selectLinks($Ya,$t=""){$q=$Ya["Name"];if(isset($t)){echo'<p class="tabs"><a href="'.h(ME.'edit='.urlencode($q).$t).'">'.lang(18)."</a>\n";}echo"<a href='".h(remove_from_uri("page"))."&amp;page=last' title='".lang(19)."'>&gt;&gt;</a>\n";}function
foreignKeys($l){return
foreign_keys($l);}function
backwardKeys($l,$nd){$c=array();foreach(get_rows("SELECT TABLE_NAME, CONSTRAINT_NAME, COLUMN_NAME, REFERENCED_COLUMN_NAME
FROM information_schema.KEY_COLUMN_USAGE
WHERE TABLE_SCHEMA = ".q($this->database())."
AND REFERENCED_TABLE_SCHEMA = ".q($this->database())."
AND REFERENCED_TABLE_NAME = ".q($l)."
ORDER BY ORDINAL_POSITION",null,"")as$d){$c[$d["TABLE_NAME"]]["keys"][$d["CONSTRAINT_NAME"]][$d["COLUMN_NAME"]]=$d["REFERENCED_COLUMN_NAME"];}foreach($c
as$b=>$a){$f=$this->tableName(table_status($b));if($f!=""){$Cc=preg_quote($nd);$ua="(:|\\s*-)?\\s+";$c[$b]["name"]=(preg_match("(^$Cc$ua(.+)|^(.+?)$ua$Cc\$)",$f,$h)?$h[2].$h[3]:$f);}else{unset($c[$b]);}}return$c;}function
backwardKeysPrint($zc,$d){if($zc){echo"<td>";foreach($zc
as$l=>$yc){foreach($yc["keys"]as$Ca){$s=ME.'select='.urlencode($l);$o=0;foreach($Ca
as$J=>$a){$s.=where_link($o++,$J,$d[$a]);}echo"<a href='".h($s)."'>".h($yc["name"])."</a>";$s=ME.'edit='.urlencode($l);foreach($Ca
as$J=>$a){$s.="&set".urlencode("[".bracket_escape($J)."]")."=".urlencode($d[$a]);}echo"<a href='".h($s)."' title='".lang(18)."'>+</a> ";}}}}function
selectQuery($m){return"<!--\n".str_replace("--","--><!-- ",$m)."\n-->\n";}function
rowDescription($l){foreach(fields($l)as$e){if($e["type"]=="varchar"){return
idf_escape($e["field"]);}}return"";}function
rowDescriptions($v,$Za){$c=$v;foreach($v[0]as$b=>$a){foreach((array)$Za[$b]as$aa){if(count($aa["source"])==1){$L=idf_escape($aa["target"][0]);$f=$this->rowDescription($aa["table"]);if($f!=""){$Kc=array();foreach($v
as$d){$Kc[$d[$b]]=exact_value($d[$b]);}$Ib=$this->_values[$aa["table"]];if(!$Ib){$Ib=get_key_vals("SELECT $L, $f FROM ".idf_escape($aa["table"])." WHERE $L IN (".implode(", ",$Kc).")");}foreach($v
as$x=>$d){if(isset($d[$b])){$c[$x][$b]=(string)$Ib[$d[$b]];}}break;}}}}return$c;}function
selectVal($a,$s,$e){$c=($a=="<i>NULL</i>"?"&nbsp;":$a);if(ereg('blob|bytea',$e["type"])&&!is_utf8($a)){$c=lang(20,strlen($a));if(ereg("^(GIF|\xFF\xD8\xFF|\x89\x50\x4E\x47\x0D\x0A\x1A\x0A)",$a)){$c="<img src='$s' alt='$c'>";}}if($e["full_type"]=="tinyint(1)"&&$c!="&nbsp;"){$c='<img src="'.($a?"".h(preg_replace("~\\?.*~","",$_SERVER["REQUEST_URI"]))."?file=plus.gif&amp;version=3.1.0":"".h(preg_replace("~\\?.*~","",$_SERVER["REQUEST_URI"]))."?file=cross.gif&amp;version=3.1.0").'" alt="'.h($a).'">';}if($s){$c="<a href='$s'>$c</a>";}if(!$s&&$e["full_type"]!="tinyint(1)"&&ereg('int|float|double|decimal',$e["type"])){$c="<div class='number'>$c</div>";}elseif(ereg('date',$e["type"])){$c="<div class='datetime'>$c</div>";}return$c;}function
editVal($a,$e){if(ereg('date|timestamp',$e["type"])&&isset($a)){return
preg_replace('~^(\\d{2}(\\d+))-(0?(\\d+))-(0?(\\d+))~',lang(21),$a);}return(ereg("binary",$e["type"])?reset(unpack("H*",$a)):$a);}function
selectColumnsPrint($u,$_){}function
selectSearchPrint($p,$_,$F){$p=(array)$_GET["where"];echo'<fieldset><legend>'.lang(22)."</legend><div>\n";$Fb=array();foreach($p
as$b=>$a){$Fb[$a["col"]]=$b;}$o=0;foreach(fields($_GET["select"])as$f=>$e){if(ereg("enum",$e["type"])){$ma=$_[$f];$b=$Fb[$f];$o--;echo"<div>".h($ma)."<input type='hidden' name='where[$o][col]' value='".h($f)."'>:",enum_input("checkbox"," name='where[$o][val][]'",$e,(array)$p[$b]["val"]);echo"</div>\n";unset($_[$f]);}}foreach($_
as$f=>$ma){$la=$this->_foreignKeyOptions($_GET["select"],$f);if($la){$b=$Fb[$f];$o--;echo"<div>".h($ma)."<input type='hidden' name='where[$o][col]' value='".h($f)."'><input type='hidden' name='where[$o][op]' value='='>: <select name='where[$o][val]'>".optionlist($la,$p[$b]["val"],true)."</select></div>\n";unset($_[$f]);}}$o=0;foreach($p
as$a){if(($a["col"]==""||$_[$a["col"]])&&"$a[col]$a[val]"!=""){echo"<div><select name='where[$o][col]'><option value=''>(".lang(23).")".optionlist($_,$a["col"],true)."</select>",html_select("where[$o][op]",array(-1=>"")+$this->operators,$a["op"]),"<input name='where[$o][val]' value='".h($a["val"])."'></div>\n";$o++;}}echo"<div><select name='where[$o][col]' onchange='selectAddRow(this);'><option value=''>(".lang(23).")".optionlist($_,null,true)."</select>",html_select("where[$o][op]",array(-1=>"")+$this->operators),"<input name='where[$o][val]'></div>\n","</div></fieldset>\n";}function
selectOrderPrint($ca,$_,$F){$Db=array();foreach($F
as$b=>$U){$ca=array();foreach($U["columns"]as$a){$ca[]=$this->fieldName(array("field"=>$a,"comment"=>$_[$a]));}if(count(array_filter($ca,'strlen'))>1&&$b!="PRIMARY"){$Db[$b]=implode(", ",$ca);}}if($Db){echo'<fieldset><legend>'.lang(24)."</legend><div>","<select name='index_order'>".optionlist(array(""=>"")+$Db,$_GET["index_order"],true)."</select>","</div></fieldset>\n";}}function
selectLimitPrint($B){echo"<fieldset><legend>".lang(25)."</legend><div>";echo
html_select("limit",array("","30","100"),$B),"</div></fieldset>\n";}function
selectLengthPrint($Fa){}function
selectActionPrint(){echo"<fieldset><legend>".lang(26)."</legend><div>","<input type='submit' value='".lang(27)."'>","</div></fieldset>\n";}function
selectEmailPrint($hb,$_){if($hb){echo'<fieldset><legend><a href="#fieldset-email" onclick="return !toggle(\'fieldset-email\');">'.lang(28)."</a></legend><div id='fieldset-email'".($_POST["email_append"]?"":" class='hidden'").">\n","<p>".lang(29).": <input name='email_from' value='".h($_POST?$_POST["email_from"]:$_COOKIE["adminer_email"])."'>\n",lang(30).": <input name='email_subject' value='".h($_POST["email_subject"])."'>\n","<p><textarea name='email_message' rows='15' cols='75' onkeydown='return textareaKeydown(this, event, false, this.form.email);'>".h($_POST["email_message"].($_POST["email_append"]?'{$'."$_POST[email_addition]}":""))."</textarea><br>\n",html_select("email_addition",$_,$_POST["email_addition"])."<input type='submit' name='email_append' value='".lang(31)."'>\n";echo"<p>".lang(32).": <input type='file' name='email_files[]' onchange=\"this.onchange = function () { }; var el = this.cloneNode(true); el.value = ''; this.parentNode.appendChild(el);\">","<p>".(count($hb)==1?'<input type="hidden" name="email_field" value="'.h(key($hb)).'">':html_select("email_field",$hb)),"<input type='submit' name='email' value='".lang(33)."' onclick=\"return this.form['delete'].onclick();\">\n","</div></fieldset>\n";}}function
selectColumnsProcess($_,$F){return
array(array(),array());}function
selectSearchProcess($r,$F){$c=array();foreach((array)$_GET["where"]as$b=>$p){$ra=$p["col"];$wb=$p["op"];$a=$p["val"];if(($b<0?"":$ra).$a!=""){$ub=array();foreach(($ra!=""?array($ra=>$r[$ra]):$r)as$f=>$e){if($ra!=""||is_numeric($a)||!ereg('int|float|double|decimal',$e["type"])){if($ra!=""&&$e["type"]=="enum"){$ub[]=idf_escape($f)." IN (".implode(", ",array_map('intval',$a)).")";}else{$Jc=ereg('char|text|enum|set',$e["type"]);$k=$this->processInput($e,($Jc&&ereg('^[^%]+$',$a)?"%$a%":$a));$ub[]=idf_escape($f).($k=="NULL"?" IS".($wb==">="?" NOT":""):(in_array($wb,$this->operators)?" $wb":($wb!="="&&$Jc?" LIKE":" =")))." $k";}}}$c[]=($ub?"(".implode(" OR ",$ub).")":"0");}}return$c;}function
selectOrderProcess($r,$F){if($_GET["order"]){return
array(idf_escape($_GET["order"][0]).(isset($_GET["desc"][0])?" DESC":""));}$Jb=$_GET["index_order"];foreach(($Jb!=""?array($F[$Jb]):$F)as$U){if($Jb!=""||$U["type"]=="INDEX"){$ma=false;foreach($U["columns"]as$a){if(ereg('date|timestamp',$r[$a]["type"])){$ma=true;break;}}$c=array();foreach($U["columns"]as$a){$c[]=idf_escape($a).($ma?" DESC":"");}return$c;}}return
array();}function
selectLimitProcess(){return(isset($_GET["limit"])?$_GET["limit"]:"30");}function
selectLengthProcess(){return"100";}function
selectEmailProcess($p,$Za){if($_POST["email_append"]){return
true;}if($_POST["email"]){$ec=0;if($_POST["all"]||$_POST["check"]){$e=idf_escape($_POST["email_field"]);$vb=$_POST["email_subject"];$W=$_POST["email_message"];preg_match_all('~\\{\\$([a-z0-9_]+)\\}~i',"$vb.$W",$H);$v=get_rows("SELECT DISTINCT $e".($H[1]?", ".implode(", ",array_map('idf_escape',array_unique($H[1]))):"")." FROM ".idf_escape($_GET["select"])." WHERE $e IS NOT NULL AND $e != ''".($p?" AND ".implode(" AND ",$p):"").($_POST["all"]?"":" AND ((".implode(") OR (",array_map('where_check',(array)$_POST["check"]))."))"));$r=fields($_GET["select"]);foreach($this->rowDescriptions($v,$Za)as$d){$Gb=array('{\\'=>'{');foreach($H[1]as$a){$Gb['{$'."$a}"]=$this->editVal($d[$a],$r[$a]);}$La=$d[$_POST["email_field"]];if(is_mail($La)&&send_mail($La,strtr($vb,$Gb),strtr($W,$Gb),$_POST["email_from"],$_FILES["email_files"])){$ec++;}}}cookie("adminer_email",$_POST["email_from"]);redirect(remove_from_uri(),lang(34,$ec));}return
false;}function
messageQuery($m){return"<!--\n".str_replace("--","--><!-- ",$m)."\n-->";}function
editFunctions($e){$c=array(""=>($e["null"]||$e["auto_increment"]||$e["full_type"]=="tinyint(1)"?"":"*"));if(ereg('date|time',$e["type"])){$c["now"]=lang(35);}if(eregi('_(md5|sha1)$',$e["field"],$h)){$c[]=strtolower($h[1]);}return$c;}function
editInput($l,$e,$S,$k){if($e["type"]=="enum"){return(isset($_GET["select"])?"<label><input type='radio'$S value='-1' checked><i>".lang(4)."</i></label> ":"").($e["null"]?"<label><input type='radio'$S value=''".($k||isset($_GET["select"])?"":" checked")."><i>".lang(36)."</i></label>":"").enum_input("radio",$S,$e,$k);}$la=$this->_foreignKeyOptions($l,$e["field"]);if($la){return"<select$S>".optionlist($la,$k,true)."</select>";}if($e["full_type"]=="tinyint(1)"){return'<input type="checkbox" value="'.h($k?$k:1).'"'.($k?' checked':'')."$S>";}if(ereg('date|timestamp',$e["type"])){return"<input value='".h($k)."'$S> (".lang(37).")";}return'';}function
processInput($e,$k,$A=""){if($A=="now"){return"$A()";}$c=$k;if(ereg('date|timestamp',$e["type"])&&preg_match('(^'.str_replace('\\$1','(?P<p1>\\d*)',preg_replace('~(\\\\\\$([2-6]))~','(?P<p\\2>\\d{1,2})',preg_quote(lang(21)))).'(.*))',$k,$h)){$c=($h["p1"]!=""?$h["p1"]:($h["p2"]!=""?($h["p2"]<70?20:19).$h["p2"]:gmdate("Y")))."-$h[p3]$h[p4]-$h[p5]$h[p6]".end($h);}$c=q($c);if(!ereg('char|text',$e["type"])&&$e["full_type"]!="tinyint(1)"&&$k==""){$c="NULL";}elseif(ereg('^(md5|sha1)$',$A)){$c="$A($c)";}if(ereg("binary",$e["type"])){$c="unhex($c)";}return$c;}function
dumpOutput(){return
array();}function
dumpFormat(){return
array('csv'=>'CSV,','csv;'=>'CSV;','tsv'=>'TSV');}function
dumpTable(){echo"\xef\xbb\xbf";}function
dumpData($l,$qc,$m){global$g;$i=$g->query($m,1);if($i){while($d=$i->fetch_assoc()){dump_csv($d);}}}function
dumpHeaders($fc){$ta=($fc!=""?friendly_url($fc):"dump");$gc="csv";header("Content-Type: text/csv; charset=utf-8");header("Content-Disposition: attachment; filename=$ta.$gc");session_write_close();return$gc;}function
navigation($Ta){global$Cb,$da;echo'<h1>
<a href="../../modules/system/admin.php" id="h1">',$this->name(),'</a>
<span class="version"> - Editor ',$Cb,'</span>
<a href="http://www.adminer.org/editor/#download" id="version">',(version_compare($Cb,$_COOKIE["adminer_version"])<0?h($_COOKIE["adminer_version"]):""),'</a>
</h1>
';if($Ta=="auth"){$_a=true;foreach((array)$_SESSION["pwds"]["server"][""]as$D=>$R){if(isset($R)){if($_a){echo"<p>\n";$_a=false;}echo"<a href='".h(auth_url("server","",$D))."'>".($D!=""?h($D):"<i>".lang(36)."</i>")."</a><br>\n";}}}else{echo'<form action="" method="post">
<p class="logout">
<input type="hidden" name="token" value="',$da,'">
<input type="submit" name="logout" value="',lang(38),'">
</p>
</form>
';if($Ta!="db"&&$Ta!="ns"){$I=table_status();if(!$I){echo"<p class='message'>".lang(5)."\n";}else{$this->tablesPrint($I);}}}}function
tablesPrint($pa){echo"<p id='tables'>\n";foreach($pa
as$d){$f=$this->tableName($d);if(isset($d["Engine"])&&$f!=""){echo"<a href='".h(ME).'select='.urlencode($d["Name"])."'>".bold($f,$_GET["select"]==$d["Name"])."</a><br>\n";}}}function
_foreignKeyOptions($l,$J){$Za=column_foreign_keys($l);foreach((array)$Za[$J]as$aa){if(count($aa["source"])==1){$L=idf_escape($aa["target"][0]);$f=$this->rowDescription($aa["table"]);if($f!=""){$c=&$this->_values[$aa["table"]];if(!isset($c)){$I=table_status($aa["table"]);$c=($I["Rows"]>1000?array():array(""=>"")+get_key_vals("SELECT $L, $f FROM ".idf_escape($aa["table"])." ORDER BY 2"));}return$c;}}}}}$j=(function_exists('adminer_object')?adminer_object():new
Adminer);function
page_header($bc,$w="",$Oa=array(),$Xb=""){global$ba,$Ja,$j,$g,$Aa;header("Content-Type: text/html; charset=utf-8");$j->headers();$Yb=$bc.($Xb!=""?": ".h($Xb):"");$Ua=($Ja?"https":"http");echo'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="',$ba,'" dir="',lang(39),'">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="robots" content="noindex">
<title>',$Yb.(SERVER!=""&&SERVER!="localhost"?h(" - ".SERVER):"")." - ".$j->name(),'</title>
<link rel="shortcut icon" type="image/x-icon" href="',h(preg_replace("~\\?.*~","",$_SERVER["REQUEST_URI"]))."?file=favicon.ico&amp;version=3.1.0",'">
<link rel="stylesheet" type="text/css" href="',h(preg_replace("~\\?.*~","",$_SERVER["REQUEST_URI"]))."?file=default.css&amp;version=3.1.0";echo'">
';if(file_exists("adminer.css")){echo'<link rel="stylesheet" type="text/css" href="adminer.css">
';}echo'
<body class="',lang(39),'" onload="bodyLoad(\'',(is_object($g)?substr($g->server_info,0,3):""),'\', \'',$Ua,'\');',(isset($_COOKIE["adminer_version"])?"":" verifyVersion('$Ua');"),'">
<script type="text/javascript" src="',h(preg_replace("~\\?.*~","",$_SERVER["REQUEST_URI"]))."?file=functions.js&amp;version=3.1.0",'"></script>

<div id="content">
';if(isset($Oa)){$s=substr(preg_replace('~(username|db|ns)=[^&]*&~','',ME),0,-1);echo'<p id="breadcrumb"><a href="'.($s?h($s):".").'">'.$Aa[DRIVER].'</a> &raquo; ';$s=substr(preg_replace('~(db|ns)=[^&]*&~','',ME),0,-1);$C=(SERVER!=""?h(SERVER):lang(40));if($Oa===false){echo"$C\n";}else{echo"<a href='".($s?h($s):".")."'>$C</a> &raquo; ";if($_GET["ns"]!=""||(DB!=""&&is_array($Oa))){echo'<a href="'.h($s."&db=".urlencode(DB).(support("scheme")?"&ns=":"")).'">'.h(DB).'</a> &raquo; ';}if(is_array($Oa)){if($_GET["ns"]!=""){echo'<a href="'.h(substr(ME,0,-1)).'">'.h($_GET["ns"]).'</a> &raquo; ';}foreach($Oa
as$b=>$a){$ma=(is_array($a)?$a[1]:$a);if($ma!=""){echo'<a href="'.h(ME."$b=").urlencode(is_array($a)?$a[0]:$a).'">'.h($ma).'</a> &raquo; ';}}}echo"$bc\n";}}echo"<h2>$Yb</h2>\n";restart_session();if($_SESSION["messages"]){echo"<div class='message'>".implode("</div>\n<div class='message'>",$_SESSION["messages"])."</div>\n";$_SESSION["messages"]=array();}$ja=&get_session("dbs");if(DB!=""&&$ja&&!in_array(DB,$ja,true)){$ja=null;}if($w){echo"<div class='error'>$w</div>\n";}}function
page_footer($Ta=""){global$j;echo'</div>

';switch_lang();echo'<div id="menu">
';$j->navigation($Ta);echo'</div>
';}function
int32($x){while($x>=2147483648){$x-=4294967296;}while($x<=-2147483649){$x+=4294967296;}return(int)$x;}function
long2str($n,$Eb){$Da='';foreach($n
as$a){$Da.=pack('V',$a);}if($Eb){return
substr($Da,0,end($n));}return$Da;}function
str2long($Da,$Eb){$n=array_values(unpack('V*',str_pad($Da,4*ceil(strlen($Da)/4),"\0")));if($Eb){$n[]=strlen($Da);}return$n;}function
xxtea_mx($N,$M,$T,$Y){return
int32((($N>>5&0x7FFFFFF)^$M<<2)+(($M>>3&0x1FFFFFFF)^$N<<4))^int32(($T^$M)+($Y^$N));}function
encrypt_string($Qa,$b){if($Qa==""){return"";}$b=array_values(unpack("V*",pack("H*",md5($b))));$n=str2long($Qa,true);$x=count($n)-1;$N=$n[$x];$M=$n[0];$kb=floor(6+52/($x+1));$T=0;while($kb-->0){$T=int32($T+0x9E3779B9);$Xa=$T>>2&3;for($P=0;$P<$x;$P++){$M=$n[$P+1];$wa=xxtea_mx($N,$M,$T,$b[$P&3^$Xa]);$N=int32($n[$P]+$wa);$n[$P]=$N;}$M=$n[0];$wa=xxtea_mx($N,$M,$T,$b[$P&3^$Xa]);$N=int32($n[$x]+$wa);$n[$x]=$N;}return
long2str($n,false);}function
decrypt_string($Qa,$b){if($Qa==""){return"";}$b=array_values(unpack("V*",pack("H*",md5($b))));$n=str2long($Qa,false);$x=count($n)-1;$N=$n[$x];$M=$n[0];$kb=floor(6+52/($x+1));$T=int32($kb*0x9E3779B9);while($T){$Xa=$T>>2&3;for($P=$x;$P>0;$P--){$N=$n[$P-1];$wa=xxtea_mx($N,$M,$T,$b[$P&3^$Xa]);$M=int32($n[$P]-$wa);$n[$P]=$M;}$N=$n[$x];$wa=xxtea_mx($N,$M,$T,$b[$P&3^$Xa]);$M=int32($n[0]-$wa);$n[0]=$M;$T=int32($T-0x9E3779B9);}return
long2str($n,true);}$g='';$da=$_SESSION["token"];if(!$_SESSION["token"]){$_SESSION["token"]=rand(1,1e6);}$sa=array();if($_COOKIE["adminer_permanent"]){foreach(explode(" ",$_COOKIE["adminer_permanent"])as$a){list($b)=explode(":",$a);$sa[$b]=$a;}}if(isset($_POST["server"])){session_regenerate_id();$_SESSION["pwds"][$_POST["driver"]][$_POST["server"]][$_POST["username"]]=$_POST["password"];if($_POST["permanent"]){$b=base64_encode($_POST["driver"])."-".base64_encode($_POST["server"])."-".base64_encode($_POST["username"]);$ob=$j->permanentLogin();$sa[$b]="$b:".base64_encode($ob?encrypt_string($_POST["password"],$ob):"");cookie("adminer_permanent",implode(" ",$sa));}if(count($_POST)==($_POST["permanent"]?5:4)||DRIVER!=$_POST["driver"]||SERVER!=$_POST["server"]||$_GET["username"]!==$_POST["username"]){redirect(auth_url($_POST["driver"],$_POST["server"],$_POST["username"]));}}elseif($_POST["logout"]){if($da&&$_POST["token"]!=$da){page_header(lang(38),lang(41));page_footer("db");exit;}else{foreach(array("pwds","dbs","queries")as$b){set_session($b,null);}$b=base64_encode(DRIVER)."-".base64_encode(SERVER)."-".base64_encode($_GET["username"]);if($sa[$b]){unset($sa[$b]);cookie("adminer_permanent",implode(" ",$sa));}redirect(substr(preg_replace('~(username|db|ns)=[^&]*&~','',ME),0,-1),lang(42));}}elseif($sa&&!$_SESSION["pwds"]){session_regenerate_id();$ob=$j->permanentLogin();foreach($sa
as$b=>$a){list(,$sd)=explode(":",$a);list($fb,$C,$D)=array_map('base64_decode',explode("-",$b));$_SESSION["pwds"][$fb][$C][$D]=decrypt_string(base64_decode($sd),$ob);}}function
auth_error($lc=null){global$g,$j,$da;$sb=session_name();$w="";if(!$_COOKIE[$sb]&&$_GET[$sb]&&ini_bool("session.use_only_cookies")){$w=lang(43);}elseif(isset($_GET["username"])){if(($_COOKIE[$sb]||$_GET[$sb])&&!$da){$w=lang(44);}else{$R=&get_session("pwds");if(isset($R)){$w=h($lc?$lc->getMessage():(is_string($g)?$g:lang(45)));$R=null;}}}page_header(lang(16),$w,null);echo"<form action='' method='post'>\n";$j->loginForm();echo"<div>";hidden_fields($_POST,array("driver","server","username","password","permanent"));echo"</div>\n","</form>\n";page_footer("auth");}if(isset($_GET["username"])){if(!class_exists("Min_DB")){unset($_SESSION["pwds"][DRIVER]);page_header(lang(46),lang(47,implode(", ",$pd)),false);page_footer("auth");exit;}$g=connect();}if(is_string($g)||!$j->login($_GET["username"],get_session("pwds"))){auth_error();exit;}$da=$_SESSION["token"];if(isset($_POST["server"])&&$_POST["token"]){$_POST["token"]=$da;}$w=($_POST?($_POST["token"]==$da?"":lang(41)):($_SERVER["REQUEST_METHOD"]!="POST"?"":lang(48,'"post_max_size"')));$g->select_db($j->database());function
email_header($td){return"=?UTF-8?B?".base64_encode($td)."?=";}function
send_mail($La,$vb,$W,$Ka="",$rb=array()){$K=(strncasecmp(PHP_OS,"win",3)?"\n":"\r\n");$W=str_replace("\n",$K,wordwrap(str_replace("\r","","$W\n")));$lb=uniqid("boundary");$jb="";foreach($rb["error"]as$b=>$a){if(!$a){$jb.="--$lb$K"."Content-Type: ".str_replace("\n","",$rb["type"][$b]).$K."Content-Disposition: attachment; filename=\"".preg_replace('~["\\n]~','',$rb["name"][$b])."\"$K"."Content-Transfer-Encoding: base64$K$K".chunk_split(base64_encode(file_get_contents($rb["tmp_name"][$b])),76,$K).$K;}}$mc="";$ab="Content-Type: text/plain; charset=utf-8$K"."Content-Transfer-Encoding: 8bit";if($jb){$jb.="--$lb--$K";$mc="--$lb$K$ab$K$K";$ab="Content-Type: multipart/mixed; boundary=\"$lb\"";}$ab.=$K."MIME-Version: 1.0$K"."X-Mailer: Adminer Editor".($Ka?$K."From: ".str_replace("\n","",$Ka):"");return
mail($La,email_header($vb),$mc.$W.$jb,$ab);}session_cache_limiter("");if(!ini_bool("session.use_cookies")||@ini_set("session.use_cookies",false)!==false){session_write_close();}$Mb=array("RESTRICT","CASCADE","SET NULL","NO ACTION");$Aa[DRIVER]=lang(16);if(isset($_GET["select"])&&($_POST["edit"]||$_POST["clone"])&&!$_POST["save"]){$_GET["edit"]=$_GET["select"];}if(isset($_GET["download"])){$q=$_GET["download"];header("Content-Type: application/octet-stream");header("Content-Disposition: attachment; filename=".friendly_url("$q-".implode("_",$_GET["where"])).".".friendly_url($_GET["field"]));echo$g->result("SELECT".limit(idf_escape($_GET["field"])." FROM ".table($q)," WHERE ".where($_GET),1));exit;}elseif(isset($_GET["edit"])){$q=$_GET["edit"];$p=(isset($_GET["select"])?(count($_POST["check"])==1?where_check($_POST["check"][0]):""):where($_GET));$ea=(isset($_GET["select"])?$_POST["edit"]:$p);$r=fields($q);foreach($r
as$f=>$e){if(!isset($e["privileges"][$ea?"update":"insert"])||$j->fieldName($e)==""){unset($r[$f]);}}if($_POST&&!$w&&!isset($_GET["select"])){$Q=$_POST["referer"];if($_POST["insert"]){$Q=($ea?null:$_SERVER["REQUEST_URI"]);}elseif(!ereg('^.+&select=.+$',$Q)){$Q=ME."select=".urlencode($q);}if(isset($_POST["delete"])){query_redirect("DELETE".limit1("FROM ".table($q)," WHERE $p"),$Q,lang(49));}else{$t=array();foreach($r
as$f=>$e){$a=process_input($e);if($a!==false&&$a!==null){$t[idf_escape($f)]=($ea?"\n".idf_escape($f)." = $a":$a);}}if($ea){if(!$t){redirect($Q);}query_redirect("UPDATE".limit1(table($q)." SET".implode(",",$t),"\nWHERE $p"),$Q,lang(50));}else{$i=insert_into($q,$t);$tc=($i?last_id():0);queries_redirect($Q,lang(51,($tc?" $tc":"")),$i);}}}$Sa=$j->tableName(table_status($q));page_header(($ea?lang(52):lang(31)),$w,array("select"=>array($q,$Sa)),$Sa);$d=null;if($_POST["save"]){$d=(array)$_POST["fields"];}elseif($p){$u=array();foreach($r
as$f=>$e){if(isset($e["privileges"]["select"])){$u[]=($_POST["clone"]&&$e["auto_increment"]?"'' AS ":(ereg("enum|set",$e["type"])?"1*".idf_escape($f)." AS ":"")).idf_escape($f);}}$d=array();if($u){$v=get_rows("SELECT".limit(implode(", ",$u)." FROM ".table($q)," WHERE $p",(isset($_GET["select"])?2:1)));$d=(isset($_GET["select"])&&count($v)!=1?null:reset($v));}}echo'
<form action="" method="post" enctype="multipart/form-data">
';if($r){echo"<table cellspacing='0'>\n";foreach($r
as$f=>$e){echo"<tr><th>".$j->fieldName($e);$rc=$_GET["set"][bracket_escape($f)];$k=(isset($d)?($d[$f]!=""&&ereg("enum|set",$e["type"])?+$d[$f]:$d[$f]):(!$ea&&$e["auto_increment"]?"":(isset($_GET["select"])?false:(isset($rc)?$rc:$e["default"]))));if(!$_POST["save"]&&is_string($k)){$k=$j->editVal($k,$e);}$A=($_POST["save"]?(string)$_POST["function"][$f]:($p&&$e["on_update"]=="CURRENT_TIMESTAMP"?"now":($k===false?null:(isset($k)?'':'NULL'))));if($e["type"]=="timestamp"&&$k=="CURRENT_TIMESTAMP"){$k="";$A="now";}input($e,$k,$A);echo"\n";}echo"</table>\n";}echo'<p>
<input type="hidden" name="token" value="',$da,'">
<input type="hidden" name="referer" value="',h(isset($_POST["referer"])?$_POST["referer"]:$_SERVER["HTTP_REFERER"]),'">
<input type="hidden" name="save" value="1">
';if(isset($_GET["select"])){hidden_fields(array("check"=>(array)$_POST["check"],"clone"=>$_POST["clone"],"all"=>$_POST["all"]));}if($r){echo"<input type='submit' value='".lang(53)."'>\n";if(!isset($_GET["select"])){echo'<input type="submit" name="insert" value="'.($ea?lang(54):lang(55))."\">\n";}}if($ea){echo"<input type='submit' name='delete' value='".lang(56)."'".confirm().">\n";}echo'</form>
';}elseif(isset($_GET["select"])){$q=$_GET["select"];$I=table_status($q);$F=indexes($q);$r=fields($q);$Pa=column_foreign_keys($q);$ic=array();$_=array();$Fa=null;foreach($r
as$b=>$e){$f=$j->fieldName($e);if(isset($e["privileges"]["select"])&&$f!=""){$_[$b]=html_entity_decode(strip_tags($f));if(ereg('text|lob',$e["type"])){$Fa=$j->selectLengthProcess();}}$ic+=$e["privileges"];}list($u,$X)=$j->selectColumnsProcess($_,$F);$p=$j->selectSearchProcess($r,$F);$ca=$j->selectOrderProcess($r,$F);$B=$j->selectLimitProcess();$Ka=($u?implode(", ",$u):"*")."\nFROM ".table($q);$Hb=($X&&count($X)<count($u)?"\nGROUP BY ".implode(", ",$X):"").($ca?"\nORDER BY ".implode(", ",$ca):"");if($_POST&&!$w){$cc="(".implode(") OR (",array_map('where_check',(array)$_POST["check"])).")";$mb=$ib=null;foreach($F
as$U){if($U["type"]=="PRIMARY"){$mb=array_flip($U["columns"]);$ib=($u?$mb:array());break;}}foreach($u
as$b=>$a){$a=$_GET["columns"][$b];if(!$a["fun"]){unset($ib[$a["col"]]);}}if($_POST["export"]){$j->dumpHeaders($q);$j->dumpTable($q,"");if(ereg("[ct]sv",$_POST["format"])){$d=array_keys($r);if($u){$d=array();foreach($u
as$a){$d[]=(ereg('^`.*`$',$a)?idf_unescape($a):$a);}}dump_csv($d);}if(!is_array($_POST["check"])||$ib===array()){$Lb=$p;if(is_array($_POST["check"])){$Lb[]="($cc)";}$j->dumpData($q,"INSERT","SELECT $Ka".($Lb?"\nWHERE ".implode(" AND ",$Lb):"").$Hb);}else{$dc=array();foreach($_POST["check"]as$a){$dc[]="(SELECT".limit($Ka,"\nWHERE ".($p?implode(" AND ",$p)." AND ":"").where_check($a).$Hb,1).")";}$j->dumpData($q,"INSERT",implode(" UNION ALL ",$dc));}exit;}if(!$j->selectEmailProcess($p,$Pa)){if($_POST["save"]||$_POST["delete"]){$i=true;$oa=0;$m=table($q);$t=array();if(!$_POST["delete"]){foreach($_
as$f=>$a){$a=process_input($r[$f]);if($a!==null){if($_POST["clone"]){$t[idf_escape($f)]=($a!==false?$a:idf_escape($f));}elseif($a!==false){$t[]=idf_escape($f)." = $a";}}}$m.=($_POST["clone"]?" (".implode(", ",array_keys($t)).")\nSELECT ".implode(", ",$t)."\nFROM ".table($q):" SET\n".implode(",\n",$t));}if($_POST["delete"]||$t){$eb="UPDATE";if($_POST["delete"]){$eb="DELETE";$m="FROM $m";}if($_POST["clone"]){$eb="INSERT";$m="INTO $m";}if($_POST["all"]||($ib===array()&&$_POST["check"])||count($X)<count($u)){$i=queries($eb." $m".($_POST["all"]?($p?"\nWHERE ".implode(" AND ",$p):""):"\nWHERE $cc"));$oa=$g->affected_rows;}else{foreach((array)$_POST["check"]as$a){$i=queries($eb.limit1($m,"\nWHERE ".where_check($a)));if(!$i){break;}$oa+=$g->affected_rows;}}}queries_redirect(remove_from_uri("page"),lang(57,$oa),$i);}elseif(!$_POST["import"]){if(!$_POST["val"]){$w=lang(58);}else{$i=true;$oa=0;foreach($_POST["val"]as$na=>$d){$t=array();foreach($d
as$b=>$a){$b=bracket_escape($b,1);$t[]=idf_escape($b)." = ".(ereg('char|text',$r[$b]["type"])||$a!=""?$j->processInput($r[$b],$a):"NULL");}$i=queries("UPDATE".limit1(table($q)." SET ".implode(", ",$t)," WHERE ".where_check($na).($p?" AND ".implode(" AND ",$p):"")));if(!$i){break;}$oa+=$g->affected_rows;}queries_redirect(remove_from_uri(),lang(57,$oa),$i);}}elseif(is_string($G=get_file("csv_file",true))){$G=preg_replace("~^\xEF\xBB\xBF~",'',$G);$i=true;$Ca=array_keys($r);preg_match_all('~(?>"[^"]*"|[^"\\r\\n]+)+~',$G,$H);$oa=count($H[0]);begin();$ua=($_POST["separator"]=="csv"?",":($_POST["separator"]=="tsv"?"\t":";"));foreach($H[0]as$b=>$a){preg_match_all("~((\"[^\"]*\")+|[^$ua]*)$ua~",$a.$ua,$Kb);if(!$b&&!array_diff($Kb[1],$Ca)){$Ca=$Kb[1];$oa--;}else{$t=array();foreach($Kb[1]as$o=>$ra){$t[idf_escape($Ca[$o])]=($ra==""&&$r[$Ca[$o]]["null"]?"NULL":q(str_replace('""','"',preg_replace('~^"|"$~','',$ra))));}$i=insert_update($q,$t,$mb);if(!$i){break;}}}if($i){queries("COMMIT");}queries_redirect(remove_from_uri("page"),lang(59,$oa),$i);queries("ROLLBACK");}else{$w=upload_error($G);}}}$Sa=$j->tableName($I);page_header(lang(27).": $Sa",$w);session_write_close();$t=null;if(isset($ic["insert"])){$t="";foreach((array)$_GET["where"]as$a){if(count($Pa[$a["col"]])==1&&($a["op"]=="="||(!$a["op"]&&!ereg('[_%]',$a["val"])))){$t.="&set".urlencode("[".bracket_escape($a["col"])."]")."=".urlencode($a["val"]);}}}$j->selectLinks($I,$t);if(!$_){echo"<p class='error'>".lang(60).($r?".":": ".error())."\n";}else{echo"<form action='' id='form'>\n","<div style='display: none;'>";hidden_fields_get();echo(DB!=""?'<input type="hidden" name="db" value="'.h(DB).'">'.(isset($_GET["ns"])?'<input type="hidden" name="ns" value="'.h($_GET["ns"]).'">':""):"");echo'<input type="hidden" name="select" value="'.h($q).'">',"</div>\n";$j->selectColumnsPrint($u,$_);$j->selectSearchPrint($p,$_,$F);$j->selectOrderPrint($ca,$_,$F);$j->selectLimitPrint($B);$j->selectLengthPrint($Fa);$j->selectActionPrint($Fa);echo"</form>\n";$y=$_GET["page"];if($y=="last"){$Z=$g->result("SELECT COUNT(*) FROM ".table($q).($p?" WHERE ".implode(" AND ",$p):""));$y=floor(max(0,$Z-1)/$B);}$m="SELECT".limit((+$B&&$X&&count($X)<count($u)&&$za=="sql"?"SQL_CALC_FOUND_ROWS ":"").$Ka,($p?"\nWHERE ".implode(" AND ",$p):"").$Hb,($B!=""?+$B:null),($y?$B*$y:0),"\n");echo$j->selectQuery($m);$i=$g->query($m);if(!$i){echo"<p class='error'>".error()."\n";}else{if($za=="mssql"){$i->seek($B*$y);}$gb=array();echo"<form action='' method='post' enctype='multipart/form-data'>\n";$v=array();while($d=$i->fetch_assoc()){$v[]=$d;}if($_GET["page"]!="last"){$Z=(+$B&&$X&&count($X)<count($u)?($za=="sql"?$g->result(" SELECT FOUND_ROWS()"):$g->result("SELECT COUNT(*) FROM ($m) x")):count($v));}if(!$v){echo"<p class='message'>".lang(61)."\n";}else{$Ac=$j->backwardKeys($q,$Sa);echo"<table cellspacing='0' class='nowrap' onclick='tableClick(event);'>\n","<thead><tr>".(!$X&&$u?"":"<td><input type='checkbox' id='all-page' onclick='formCheck(this, /check/);'> <a href='".h($_GET["modify"]?remove_from_uri("modify"):$_SERVER["REQUEST_URI"]."&modify=1")."'>".lang(62)."</a>");$Ab=array();$ga=array();reset($u);$Gc=1;foreach($v[0]as$b=>$a){$a=$_GET["columns"][key($u)];$e=$r[$u?$a["col"]:$b];$f=($e?$j->fieldName($e,$Gc):"*");if($f!=""){$Gc++;$Ab[$b]=$f;$J=idf_escape($b);echo'<th><a href="'.h(remove_from_uri('(order|desc)[^=]*|page').'&order%5B0%5D='.urlencode($b).($ca[0]==$J||$ca[0]==$b||(!$ca&&$X[0]==$J)?'&desc%5B0%5D=1':'')).'">'.apply_sql_function($a["fun"],$f)."</a>";}$ga[$b]=$a["fun"];next($u);}$xb=array();if($_GET["modify"]){foreach($v
as$d){foreach($d
as$b=>$a){$xb[$b]=max($xb[$b],min(40,strlen(utf8_decode($a))));}}}echo($Ac?"<th>".lang(63):"")."</thead>\n";foreach($j->rowDescriptions($v,$Pa)as$x=>$d){$_b=unique_array($v[$x],$F);$na="";foreach($_b
as$b=>$a){$na.="&".(isset($a)?urlencode("where[".bracket_escape($b)."]")."=".urlencode($a):"null%5B%5D=".urlencode($b));}echo"<tr".odd().">".(!$X&&$u?"":"<td>".checkbox("check[]",substr($na,1),in_array(substr($na,1),(array)$_POST["check"]),"","this.form['all'].checked = false; formUncheck('all-page');").(count($X)<count($u)||information_schema(DB)?"":" <a href='".h(ME."edit=".urlencode($q).$na)."'>".lang(62)."</a>"));foreach($d
as$b=>$a){if(isset($Ab[$b])){$e=$r[$b];if($a!=""&&(!isset($gb[$b])||$gb[$b]!="")){$gb[$b]=(is_mail($a)?$Ab[$b]:"");}$s="";$a=$j->editVal($a,$e);if(!isset($a)){$a="<i>NULL</i>";}else{if(ereg('blob|bytea|raw|file',$e["type"])&&$a!=""){$s=h(ME.'download='.urlencode($q).'&field='.urlencode($b).$na);}if($a==""){$a="&nbsp;";}elseif($Fa!=""&&ereg('text|blob',$e["type"])&&is_utf8($a)){$a=shorten_utf8($a,max(0,+$Fa));}else{$a=h($a);}if(!$s){foreach((array)$Pa[$b]as$ka){if(count($Pa[$b])==1||end($ka["source"])==$b){$s="";foreach($ka["source"]as$o=>$Nb){$s.=where_link($o,$ka["target"][$o],$v[$x][$Nb]);}$s=h(($ka["db"]!=""?preg_replace('~([?&]db=)[^&]+~','\\1'.urlencode($ka["db"]),ME):ME).'select='.urlencode($ka["table"]).$s);if(count($ka["source"])==1){break;}}}}if($b=="COUNT(*)"){$s=h(ME."select=".urlencode($q));$o=0;foreach((array)$_GET["where"]as$n){if(!array_key_exists($n["col"],$_b)){$s.=h(where_link($o++,$n["col"],$n["val"],$n["op"]));}}foreach($_b
as$Y=>$n){$s.=h(where_link($o++,$Y,$n,(isset($n)?"=":"IS NULL")));}}}if(!$s){if(is_mail($a)){$s="mailto:$a";}if($Ua=is_url($d[$b])){$s=($Ua=="http"&&$Ja?$d[$b]:"$Ua://www.adminer.org/redirect/?url=".urlencode($d[$b]));}}$L=h("val[$na][".bracket_escape($b)."]");$k=$_POST["val"][$na][bracket_escape($b)];$wc=h(isset($k)?$k:$d[$b]);$Ic=strpos($a,"<i>...</i>");$Sc=is_utf8($a)&&!$Ic&&$v[$x][$b]==$d[$b]&&!$ga[$b];$Tc=ereg('text|lob',$e["type"]);echo(($_GET["modify"]&&$Sc)||isset($k)?"<td>".($Tc?"<textarea name='$L' cols='30' rows='".(substr_count($d[$b],"\n")+1)."' onkeydown='return textareaKeydown(this, event);'>$wc</textarea>":"<input name='$L' value='$wc' size='$xb[$b]'>"):"<td id='$L' ondblclick=\"".($Sc?"selectDblClick(this, event".($Tc?", 1":"").")":"alert('".h($Ic?lang(64):lang(65))."')").";\">".$j->selectVal($a,$s,$e));}}$j->backwardKeysPrint($Ac,$v[$x]);echo"</tr>\n";}echo"</table>\n";}parse_str($_COOKIE["adminer_export"],$Bb);if($v||$y){$zb=true;if($_GET["page"]!="last"&&+$B&&count($X)>=count($u)&&($Z>=$B||$y)){$Z=$I["Rows"];if(!isset($Z)||$p||2*$y*$B>$Z||($I["Engine"]=="InnoDB"&&$Z<1e4)){ob_flush();flush();$Z=$g->result("SELECT COUNT(*) FROM ".table($q).($p?" WHERE ".implode(" AND ",$p):""));}else{$zb=false;}}echo"<p class='pages'>";if(+$B&&$Z>$B){$yb=floor(($Z-1)/$B);echo'<a href="'.h(remove_from_uri("page"))."\" onclick=\"var page = +prompt('".lang(66)."', '".($y+1)."'); if (!isNaN(page) &amp;&amp; page) location.href = this.href + (page != 1 ? '&amp;page=' + (page - 1) : ''); return false;\">".lang(66)."</a>:".pagination(0,$y).($y>5?" ...":"");for($o=max(1,$y-4);$o<min($yb,$y+5);$o++){echo
pagination($o,$y);}echo($y+5<$yb?" ...":"").($zb?pagination($yb,$y):' <a href="'.h(remove_from_uri()."&page=last").'">'.lang(67)."</a>");}echo" (".($zb?"":"~ ").lang(68,$Z).") ".checkbox("all",1,0,lang(69))."\n";if(!information_schema(DB)){echo'<fieldset><legend>',lang(52),'</legend><div>
<input type="submit" value="',lang(53),'" title="',lang(58),'">
<input type="submit" name="edit" value="',lang(52),'">
<input type="submit" name="clone" value="',lang(70),'">
<input type="submit" name="delete" value="',lang(56),'"',confirm("(this.form['all'].checked ? $Z : formChecked(this, /check/))"),'>
</div></fieldset>
';}print_fieldset("export",lang(71));$kc=$j->dumpOutput();echo($kc?html_select("output",$kc,$Bb["output"])." ":"").html_select("format",$j->dumpFormat(),$Bb["format"])," <input type='submit' name='export' value='".lang(71)."'>\n","</div></fieldset>\n";}print_fieldset("import",lang(72),!$v);echo"<input type='hidden' name='token' value='$da'><input type='file' name='csv_file'> ",html_select("separator",array("csv"=>"CSV,","csv;"=>"CSV;","tsv"=>"TSV"),$Bb["format"],1);echo" <input type='submit' name='import' value='".lang(73)."'>\n","</div></fieldset>\n";$j->selectEmailPrint(array_filter($gb,'strlen'),$_);echo"</form>\n";}}}else{page_header(lang(40),"",false);echo"<form action='' method='post'>\n","<p>".lang(74).": <input name='query' value='".h($_POST["query"])."'> <input type='submit' value='".lang(22)."'>\n";if($_POST["query"]!=""){search_tables();}echo"<table cellspacing='0' class='nowrap' onclick='tableClick(event);'>\n",'<thead><tr class="wrap"><td><input id="check-all" type="checkbox" onclick="formCheck(this, /^tables\[/);"><th>'.lang(75).'<td>'.lang(76)."</thead>\n";foreach(table_status()as$l=>$d){$f=$j->tableName($d);if(isset($d["Engine"])&&$f!=""){echo'<tr'.odd().'><td>'.checkbox("tables[]",$l,in_array($l,(array)$_POST["tables"],true),"","formUncheck('check-all');"),'<th><a href="'.h(ME).'select='.urlencode($l).'">'.h($f).'</a>';$a=number_format($d["Rows"],0,'.',lang(77));echo"<td align='right'><a href='".h(ME."edit=").urlencode($l)."'>".($d["Engine"]=="InnoDB"&&$a?"~ $a":$a)."</a>";}}echo"</table>\n","</form>\n";}page_footer();